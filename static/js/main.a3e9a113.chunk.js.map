{"version":3,"sources":["Game.js","board.js","App.js","index.js"],"names":["ForbiddenDesert","setup","ctx","players","setupPlayers","numPlayers","tiles","setupTiles","equipmentDeck","setupEquipment","difficultyName","stormLevel","numDraws","lastDrawType","collectedParts","stormPicksUpProb","sunBeatsDownProb","turnEnded","numMoves","isNavigating","navigatingID","navigatingNumMoves","moves","move","G","pos","currentPlayer","position","carryingPlayer","dig","role","sandCount","excavate","currPos","isRevealed","type","i","length","water","maxWater","found","part","hid","vid","partName","index","finalParts","push","equipment","pop","undoable","giveWater","giveID","receiveID","pickUpFinalPart","tempRemovedPart","splice","mitigate","collectWater","carry","id","drop","navigate","events","setStage","giveEquipment","playerID","equipmentIndex","targetPlayerID","item","duneBlaster","targetTileID","setPlayerInfo","setDifficulty","diff","removeWater","placeFinalPart","addSand","magicFinalPart","giveDuneBlaster","turn","stages","navigating","stopNavigating","endStage","onBegin","onEnd","draw","val","random","Die","bothQualify","doStormPicksUp","Math","min","stormPicksuPProb","stormPos","maxTilesAffected","windDirection","windStrength","affectedPos","candidatePos","floor","tempStormTile","prevPos","directionString","affectedPlayers","j","endIf","win","launchpadPos","count","getRandomInt","max","shuffle","sandTiles","deck","array","randomIndex","currentIndex","ForbiddenDesertBoard","state","assignID","assignDifficulty","digging","chooseCarry","chooseNavigate","duneBlasting","duneBlastingPlayerID","duneBlastingInventoryID","excavateErrorMsg","mitigateErrorMsg","carryErrorMsg","dropErrorMsg","this","props","setState","currentPlayerID","isBuried","isSameTile","isAdjacentTile","isDiagonalTile","setTimeout","giverID","receiverID","waterErrorMsg","player","carrying","equipmentName","currentPlayerPos","check1","playerID1","playerID2","pos1","pos2","check2","abs","endTurn","className","onClick","assignRoleTo","assignDifficultyTo","idToStateClass","Array","fill","map","currentClass","tileID","_","tileIsDiggable","gameover","tileIsMovable","row","tile","playersOnThisTile","k","sandIndicator","l","concat","onClickTile","header","actionButtons","accessKey","playersFound","undo","rightbar","playerInfoList","giveWaterButtons","giver","isSameTile2","isAdjacentTile2","giveWaterTo","giveEquipmentButtons","giveEquipmentTo","useEquipment","toFixed","draw3","draw4","draw5","draw6","death","partList","color","infobar","React","Component","App","href","target","ForbiddenDesertClient","Client","game","board","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a3e9a113.chunk.js","sourcesContent":["import { INVALID_MOVE } from \"boardgame.io/core\";\r\n\r\nexport const ForbiddenDesert = {\r\n    setup: (ctx) => ({\r\n        players: setupPlayers(ctx.numPlayers),\r\n        tiles: setupTiles(),\r\n        equipmentDeck: setupEquipment(),\r\n        difficultyName: \"\",\r\n        stormLevel: 0,\r\n        numDraws: 0,\r\n        //for showing end-of-last-turn history\r\n        lastDrawType: [],\r\n        //collect 4 parts\r\n        collectedParts: [],\r\n        //for storm probability stuff (see sim.py)\r\n        stormPicksUpProb: 1,\r\n        sunBeatsDownProb: 1,\r\n        //for turn onEnd; there's a bug where sometimes (particularly when people are at 0 water),\r\n        //onEnd happens twice. i can't figure out the cause, but this should fix it\r\n        turnEnded: false,\r\n        //use this instead of ctx.numMoves\r\n        numMoves: 0,\r\n        //navigator\r\n        isNavigating: false,\r\n        navigatingID: -1,\r\n        navigatingNumMoves: 0,\r\n    }),\r\n\r\n    moves: {\r\n        move: (G, ctx, pos) => {\r\n            if (G.numMoves < 4) {\r\n                G.players[ctx.currentPlayer].position = pos;\r\n                //climber\r\n                if (G.players[ctx.currentPlayer].carryingPlayer !== -1) {\r\n                    G.players[G.players[ctx.currentPlayer].carryingPlayer].position = pos;\r\n                }\r\n                G.numMoves += 1;\r\n            }\r\n        },\r\n        dig: (G, ctx, pos) => {\r\n            if (G.numMoves < 4) {\r\n                if (G.players[ctx.currentPlayer].role === \"Archeologist\") {\r\n                    G.tiles[pos].sandCount -= 2;\r\n                    if (G.tiles[pos].sandCount < 0) {\r\n                        G.tiles[pos].sandCount = 0;\r\n                    }\r\n                }\r\n                else {\r\n                    G.tiles[pos].sandCount--;\r\n                }\r\n                G.numMoves += 1;\r\n            }\r\n        },\r\n        excavate: {\r\n            move: (G, ctx) => {\r\n                if (G.numMoves < 4) {\r\n                    const currPos = G.players[ctx.currentPlayer].position;\r\n                    G.tiles[currPos].isRevealed = true;\r\n                    if (G.tiles[currPos].type === \"well\") {\r\n                        //everyone on currPos gets two water\r\n                        for (var i = 0; i < G.players.length; i++) {\r\n                            if (G.players[i].position === currPos) {\r\n                                G.players[i].water += 2;\r\n                            }\r\n                            if (G.players[i].water > G.players[i].maxWater) {\r\n                                G.players[i].water = G.players[i].maxWater;\r\n                            }\r\n                        }\r\n                    }\r\n                    else if (G.tiles[currPos].type === \"clue\") {\r\n                        //check if the other clue has also been revealed\r\n                        //if so, then generate finalPart on the appropriate tile\r\n                        var found = false;\r\n                        for (var i = 0; i < G.tiles.length; i++) {\r\n                            if (G.tiles[i].isRevealed && G.tiles[i].type === \"clue\" &&\r\n                                i !== currPos && G.tiles[i].part === G.tiles[currPos].part) {\r\n                                found = true;\r\n                            }\r\n                        }\r\n                        if (found) {\r\n                            var hid;\r\n                            var vid;\r\n                            var partName = G.tiles[currPos].part;\r\n                            for (var i = 0; i < G.tiles.length; i++) {\r\n                                if (G.tiles[i].part === partName && G.tiles[i].pos === \"h\") {\r\n                                    hid = i;\r\n                                }\r\n                                if (G.tiles[i].part === partName && G.tiles[i].pos === \"v\") {\r\n                                    vid = i;\r\n                                }\r\n                            }\r\n                            //index = (hid rounded down to the nearest multiple of 5) + (vid % 5)\r\n                            while ((hid % 5) !== 0 && hid >= 0) {\r\n                                hid -= 1;\r\n                            }\r\n                            const index = hid + (vid % 5);\r\n                            G.tiles[index].finalParts.push(partName);\r\n                        }\r\n                    }\r\n                    else if (G.tiles[currPos].type === \"gear\" || G.tiles[currPos].type === \"tunnel\") {\r\n                        if (G.equipmentDeck.length > 0) {\r\n                            //just pop off the top; deck is already shuffled\r\n                            G.players[ctx.currentPlayer].equipment.push(G.equipmentDeck.pop());\r\n                        }\r\n                    }\r\n                    G.numMoves += 1;\r\n                }\r\n            },\r\n            undoable: false\r\n        },\r\n        giveWater: (G, ctx, giveID, receiveID) => {\r\n            //free move\r\n            G.players[giveID].water -= 1;\r\n            G.players[receiveID].water += 1;\r\n        },\r\n        pickUpFinalPart: (G, ctx) => {\r\n            if (G.numMoves < 4) {\r\n                const tempRemovedPart = G.tiles[G.players[ctx.currentPlayer].position].finalParts[0];\r\n                //remove the first final part from tile\r\n                G.tiles[G.players[ctx.currentPlayer].position].finalParts.splice(0, 1);\r\n                //add to collected parts\r\n                G.collectedParts.push(tempRemovedPart);\r\n                G.numMoves += 1;\r\n            }\r\n        },\r\n        mitigate: (G, ctx) => {\r\n            if (G.numMoves < 4) {\r\n                G.numDraws -= 1;\r\n                G.numMoves += 1;\r\n            }\r\n        },\r\n        collectWater: (G, ctx) => {\r\n            if (G.numMoves < 4) {\r\n                G.players[ctx.currentPlayer].water += 2;\r\n                if (G.players[ctx.currentPlayer].water > G.players[ctx.currentPlayer].maxWater) {\r\n                    G.players[ctx.currentPlayer].water = G.players[ctx.currentPlayer].maxWater;\r\n                }\r\n                G.numMoves += 1;\r\n            }\r\n        },\r\n        //climber\r\n        carry: (G, ctx, id) => {\r\n            //free move\r\n            G.players[ctx.currentPlayer].carryingPlayer = id;\r\n        },\r\n        drop: (G, ctx) => {\r\n            //free move\r\n            G.players[ctx.currentPlayer].carryingPlayer = -1;\r\n        },\r\n        //navigator\r\n        navigate: (G, ctx, id) => {\r\n            if (G.numMoves < 4) {\r\n                G.isNavigating = true;\r\n                G.navigatingID = id;\r\n                ctx.events.setStage(\"navigating\");\r\n                G.numMoves += 1;\r\n            }\r\n        },\r\n        giveEquipment: (G, ctx, playerID, equipmentIndex, targetPlayerID) => {\r\n            const item = G.players[playerID].equipment[equipmentIndex];\r\n            G.players[targetPlayerID].equipment.push(item);\r\n            G.players[playerID].equipment.splice(equipmentIndex, 1);\r\n        },\r\n        duneBlaster: (G, ctx, playerID, equipmentIndex, targetTileID) => {\r\n            G.players[playerID].equipment.splice(equipmentIndex, 1);\r\n            G.tiles[targetTileID].sandCount = 0;\r\n        },\r\n        setPlayerInfo: {\r\n            move: (G, ctx, id, role) => {\r\n                //free move\r\n                G.players[id].role = role;\r\n                if (role === \"Archeologist\" || role === \"Climber\") {\r\n                    G.players[id].maxWater = 3;\r\n                    G.players[id].water = 3;\r\n                }\r\n                else if (role === \"Explorer\" || role === \"Meteorologist\" || role === \"Navigator\") {\r\n                    G.players[id].maxWater = 4;\r\n                    G.players[id].water = 4;\r\n                }\r\n                else {\r\n                    G.players[id].maxWater = 5;\r\n                    G.players[id].water = 5;\r\n                }\r\n            },\r\n            undoable: false,\r\n        },\r\n        setDifficulty: {\r\n            move: (G, ctx, diff) => {\r\n                //free move \r\n                G.stormLevel = diff;\r\n                if (diff === 0) {\r\n                    G.numDraws = 2;\r\n                    G.difficultyName = \"Novice\";\r\n                }\r\n                else {\r\n                    if (diff === 1) {\r\n                        G.difficultyName = \"Normal\";\r\n                    }\r\n                    else if (diff === 2) {\r\n                        G.difficultyName = \"Elite\";\r\n                    }\r\n                    else if (diff === 3) {\r\n                        G.difficultyName = \"Legendary\";\r\n                    }\r\n                    G.numDraws = 3;\r\n                }\r\n            },\r\n            undoable: false,\r\n        },\r\n        //DEBUG ONLY\r\n        removeWater: (G, ctx, id) => {\r\n            G.players[id].water -= 1;\r\n        },\r\n        placeFinalPart: (G, ctx, id) => {\r\n            G.tiles[id].finalParts.push(\"Z\");\r\n        },\r\n        addSand: (G, ctx, id) => {\r\n            G.tiles[id].sandCount += 1;\r\n        },\r\n        magicFinalPart: (G, ctx) => {\r\n            G.collectedParts.push(\"Z\");\r\n        },\r\n        giveDuneBlaster: (G, ctx, playerID) => {\r\n            G.players[playerID].equipment.push(\"Dune Blaster\");\r\n        }\r\n    },\r\n\r\n    turn: {\r\n        stages: {\r\n            navigating: {\r\n                moves: {\r\n                    move: (G, ctx, pos) => {\r\n                        if (G.navigatingNumMoves < 3) {\r\n                            G.players[G.navigatingID].position = pos;\r\n                            //climber\r\n                            if (G.players[G.navigatingID].carryingPlayer !== -1) {\r\n                                G.players[G.players[G.navigatingID].carryingPlayer].position = pos;\r\n                            }\r\n                            G.navigatingNumMoves += 1;\r\n                        }\r\n                    },\r\n                    //climber only\r\n                    carry: (G, ctx, id) => {\r\n                        //free move\r\n                        G.players[G.navigatingID].carryingPlayer = id;\r\n                    },\r\n                    drop: (G, ctx) => {\r\n                        //free move\r\n                        G.players[G.navigatingID].carryingPlayer = -1;\r\n                    },\r\n                    stopNavigating: (G, ctx, pos) => {\r\n                        //climber automatically drop\r\n                        G.players[G.navigatingID].carryingPlayer = -1;\r\n                        G.isNavigating = false;\r\n                        G.navigatingNumMoves = 0;\r\n                        ctx.events.endStage();\r\n                    }\r\n                },\r\n            }\r\n        },\r\n        onBegin: (G, ctx) => {\r\n            G.numMoves = 0;\r\n            G.turnEnded = false;\r\n        },\r\n        onEnd: (G, ctx) => {\r\n            if (!G.turnEnded) {\r\n                //climber automatically drop\r\n                G.players[ctx.currentPlayer].carryingPlayer = -1;\r\n\r\n                G.lastDrawType = [];\r\n                //numDraws should be set from end of last turn\r\n                //(we set it at the end for meteorologist to be able to decrement it during turn)\r\n                for (var draw = 0; draw < G.numDraws; draw++) {\r\n                    var val = ctx.random.Die(100);\r\n                    if (val <= (G.stormPicksUpProb) || val <= (G.sunBeatsDownProb)) {\r\n                        var bothQualify = false;\r\n                        var doStormPicksUp = false;\r\n                        //if both qualify...\r\n                        if (val <= Math.min((G.stormPicksuPProb), (G.sunBeatsDownProb))) {\r\n                            bothQualify = true;\r\n                            //...prioritize the one with higher probability.\r\n                            if ((G.stormPicksUpProb) > (G.sunBeatsDownProb)) {\r\n                                doStormPicksUp = true;\r\n                            }\r\n                        }\r\n                        if ((!bothQualify && val <= (G.stormPicksUpProb)) || (bothQualify && doStormPicksUp)) {\r\n                            G.stormLevel += 1;\r\n                            G.lastDrawType.push(\"Storm Picks Up\");\r\n                            //reset stormPicksUp probability\r\n                            G.stormPicksUpProb = 1;\r\n                            //increment sunBeatsDown\r\n                            G.sunBeatsDownProb += 2;\r\n                        }\r\n                        else {\r\n                            for (var i = 0; i < G.players.length; i++) {\r\n                                if (!(G.tiles[G.players[i].position].type === \"tunnel\" && G.tiles[G.players[i].position].isRevealed)) {\r\n                                    G.players[i].water -= 1;\r\n                                }\r\n                            }\r\n                            G.lastDrawType.push(\"Sun Beats Down\");\r\n                            //reset sunBeatsDown\r\n                            G.sunBeatsDownProb = 1;\r\n                            //increment stormPicksUp\r\n                            G.stormPicksUpProb += 1;\r\n                        }\r\n                    }\r\n                    else {\r\n                        //increment both\r\n                        G.stormPicksUpProb += 1;\r\n                        G.sunBeatsDownProb += 2;\r\n\r\n                        var stormPos = 0;\r\n                        for (stormPos; stormPos < G.tiles.length; stormPos++) {\r\n                            if (G.tiles[stormPos].type === \"storm\") {\r\n                                break;\r\n                            }\r\n                        }\r\n                        //1 = up, 2 = left, 3 = down, 4 = right\r\n                        var windDirection = ctx.random.Die(4);\r\n                        //1-3 = 1, 4-5 = 2, 6 = 3\r\n                        var windStrength = ctx.random.Die(6);\r\n                        var maxTilesAffected;\r\n                        if (windStrength <= 3) {\r\n                            maxTilesAffected = 1;\r\n                        }\r\n                        else if (windStrength <= 5) {\r\n                            maxTilesAffected = 2;\r\n                        }\r\n                        else {\r\n                            maxTilesAffected = 3;\r\n                        }\r\n                        //identify positions of tiles that are moved\r\n                        var affectedPos = [];\r\n                        var candidatePos = stormPos;\r\n                        if (windDirection === 1) {\r\n                            while (affectedPos.length < maxTilesAffected) {\r\n                                candidatePos += 5;\r\n                                if (candidatePos >= 0 && candidatePos <= 24) {\r\n                                    affectedPos.push(candidatePos);\r\n                                }\r\n                                else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        else if (windDirection === 2) {\r\n                            while (affectedPos.length < maxTilesAffected) {\r\n                                candidatePos += 1;\r\n                                //check whether on the same row\r\n                                if (candidatePos >= 0 && candidatePos <= 24 &&\r\n                                    Math.floor(candidatePos / 5) === Math.floor(stormPos / 5)) {\r\n                                    affectedPos.push(candidatePos);\r\n                                }\r\n                                else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        else if (windDirection === 3) {\r\n                            while (affectedPos.length < maxTilesAffected) {\r\n                                candidatePos -= 5;\r\n                                if (candidatePos >= 0 && candidatePos <= 24) {\r\n                                    affectedPos.push(candidatePos);\r\n                                }\r\n                                else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        else if (windDirection === 4) {\r\n                            while (affectedPos.length < maxTilesAffected) {\r\n                                candidatePos -= 1;\r\n                                //check whether on the same row\r\n                                if (candidatePos >= 0 && candidatePos <= 24 &&\r\n                                    Math.floor(candidatePos / 5) === Math.floor(stormPos / 5)) {\r\n                                    affectedPos.push(candidatePos);\r\n                                }\r\n                                else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        //add 1 sand to affected tiles\r\n                        for (var i = 0; i < affectedPos.length; i++) {\r\n                            G.tiles[affectedPos[i]].sandCount += 1;\r\n                        }\r\n\r\n                        //execute movements\r\n                        const tempStormTile = G.tiles[stormPos];\r\n                        var prevPos = stormPos;\r\n                        //edge case: first give all of stormPos's finalParts to the first affectedPos tile\r\n                        if (affectedPos.length > 0) {\r\n                            for (var i = 0; i < G.tiles[stormPos].finalParts.length; i++) {\r\n                                G.tiles[affectedPos[0]].finalParts.push(G.tiles[stormPos].finalParts[i]);\r\n                            }\r\n                            //clear storm's finalParts\r\n                            G.tiles[stormPos].finalParts = [];\r\n                        }\r\n                        //...now execute\r\n                        for (var i = 0; i < affectedPos.length; i++) {\r\n                            G.tiles[prevPos] = G.tiles[affectedPos[i]];\r\n                            prevPos = affectedPos[i];\r\n                        }\r\n                        if (affectedPos.length !== 0) {\r\n                            G.tiles[affectedPos[affectedPos.length - 1]] = tempStormTile;\r\n                        }\r\n\r\n                        //move all affected players\r\n                        var affectedPlayers = [];\r\n                        for (var i = 0; i < G.players.length; i++) {\r\n                            for (var j = 0; j < affectedPos.length; j++) {\r\n                                if (G.players[i].position === affectedPos[j]) {\r\n                                    affectedPlayers.push(i);\r\n                                }\r\n                            }\r\n                        }\r\n                        for (var i = 0; i < affectedPlayers.length; i++) {\r\n                            if (windDirection === 1) {\r\n                                G.players[affectedPlayers[i]].position -= 5;\r\n                            }\r\n                            else if (windDirection === 2) {\r\n                                G.players[affectedPlayers[i]].position -= 1;\r\n                            }\r\n                            else if (windDirection === 3) {\r\n                                G.players[affectedPlayers[i]].position += 5;\r\n                            }\r\n                            else if (windDirection === 4) {\r\n                                G.players[affectedPlayers[i]].position += 1;\r\n                            }\r\n                        }\r\n\r\n                        var directionString;\r\n                        if (windDirection === 1) {\r\n                            directionString = \"up\";\r\n                        }\r\n                        else if (windDirection === 2) {\r\n                            directionString = \"left\";\r\n                        }\r\n                        else if (windDirection === 3) {\r\n                            directionString = \"down\";\r\n                        }\r\n                        else if (windDirection === 4) {\r\n                            directionString = \"right\";\r\n                        }\r\n                        G.lastDrawType.push(\"Wind: \" + directionString + \", strength \" + maxTilesAffected);\r\n                    }\r\n                }\r\n                //check storm level + ctx.numPlayers, and draw according to that\r\n                if (G.stormLevel === 0) {\r\n                    G.numDraws = 2;\r\n                }\r\n                else if (ctx.numPlayers === 2) {\r\n                    if (G.stormLevel <= 3) {\r\n                        G.numDraws = 3;\r\n                    }\r\n                    else if (G.stormLevel <= 7) {\r\n                        G.numDraws = 4;\r\n                    }\r\n                    else if (G.stormLevel <= 10) {\r\n                        G.numDraws = 5;\r\n                    }\r\n                    else {\r\n                        G.numDraws = 6;\r\n                    }\r\n                }\r\n                else if (ctx.numPlayers === 3 || ctx.numPlayers === 4) {\r\n                    if (G.stormLevel <= 4) {\r\n                        G.numDraws = 3;\r\n                    }\r\n                    else if (G.stormLevel <= 8) {\r\n                        G.numDraws = 4;\r\n                    }\r\n                    else if (G.stormLevel <= 11) {\r\n                        G.numDraws = 5;\r\n                    }\r\n                    else {\r\n                        G.numDraws = 6;\r\n                    }\r\n                }\r\n                else if (ctx.numPlayers === 5) {\r\n                    if (G.stormLevel <= 5) {\r\n                        G.numDraws = 3;\r\n                    }\r\n                    else if (G.stormLevel <= 9) {\r\n                        G.numDraws = 4;\r\n                    }\r\n                    else if (G.stormLevel <= 12) {\r\n                        G.numDraws = 5;\r\n                    }\r\n                    else {\r\n                        G.numDraws = 6;\r\n                    }\r\n                }\r\n                G.turnEnded = true;\r\n            }\r\n        }\r\n    },\r\n\r\n    endIf: (G, ctx) => {\r\n        for (var i = 0; i < G.players.length; i++) {\r\n            if (G.players[i].water < 0) {\r\n                return { win: false };\r\n            }\r\n        }\r\n        if ((ctx.numPlayers === 2 && G.stormLevel === 13) ||\r\n            ((ctx.numPlayers === 3 || ctx.numPlayers === 4) && G.stormLevel === 14) ||\r\n            (ctx.numPlayers === 5 && G.stormLevel === 15)) {\r\n            return { win: false };\r\n        }\r\n        if (G.collectedParts.length === 4) {\r\n            //first find launchpad position\r\n            var launchpadPos;\r\n            for (var i = 0; i < G.tiles.length; i++) {\r\n                if (G.tiles[i].type === \"launchpad\") {\r\n                    launchpadPos = i;\r\n                    break;\r\n                }\r\n            }\r\n            //check if every player is on it\r\n            var count = 0;\r\n            for (var i = 0; i < G.players.length; i++) {\r\n                if (G.players[i].position === launchpadPos) {\r\n                    count += 1;\r\n                }\r\n            }\r\n            if (count === G.players.length) {\r\n                return { win: true };\r\n            }\r\n        }\r\n        return false;\r\n    },\r\n};\r\n\r\nvar setupPlayers = (numPlayers) => {\r\n    var players = [];\r\n    var pos = getRandomInt(25);\r\n    while (pos === 12) {\r\n        pos = getRandomInt(25);\r\n    }\r\n    for (var i = 0; i < numPlayers; i++) {\r\n        players.push({\r\n            role: \"\",\r\n            position: pos,\r\n            water: 0,\r\n            maxWater: 0,\r\n            equipment: [],\r\n            carryingPlayer: -1,\r\n        });\r\n    }\r\n    return players;\r\n}\r\n\r\nfunction getRandomInt(max) {\r\n    return Math.floor(Math.random() * max);\r\n}\r\n\r\nvar setupTiles = () => {\r\n    var tiles = [];\r\n    for (var i = 0; i < 2; i++) {\r\n        tiles.push({\r\n            isRevealed: false,\r\n            sandCount: 0,\r\n            type: \"well\",\r\n            finalParts: []\r\n        });\r\n    }\r\n    tiles.push({\r\n        isRevealed: false,\r\n        sandCount: 0,\r\n        type: \"mirage\",\r\n        finalParts: []\r\n    });\r\n    for (var i = 0; i < 9; i++) {\r\n        tiles.push({\r\n            isRevealed: false,\r\n            sandCount: 0,\r\n            type: \"gear\",\r\n            finalParts: []\r\n        });\r\n    }\r\n    for (var i = 0; i < 3; i++) {\r\n        tiles.push({\r\n            isRevealed: false,\r\n            sandCount: 0,\r\n            type: \"tunnel\",\r\n            finalParts: []\r\n        })\r\n    }\r\n    for (var i = 0; i < 4; i++) {\r\n        for (var j = 0; j < 2; j++) {\r\n            //parts: A, B, C, D\r\n            //pos: 0 --> vertical, 1 --> horizontal\r\n            var part;\r\n            var pos;\r\n            if (i === 0) part = \"A\";\r\n            else if (i === 1) part = \"B\";\r\n            else if (i === 2) part = \"C\";\r\n            else if (i === 3) part = \"D\";\r\n            if (j === 0) pos = \"h\";\r\n            else if (j === 1) pos = \"v\"\r\n            tiles.push({\r\n                isRevealed: false,\r\n                sandCount: 0,\r\n                type: \"clue\",\r\n                part: part,\r\n                pos: pos,\r\n                finalParts: []\r\n            });\r\n        }\r\n    }\r\n    tiles.push({\r\n        isRevealed: false,\r\n        sandCount: 0,\r\n        type: \"launchpad\",\r\n        finalParts: []\r\n    })\r\n    shuffle(tiles);\r\n    tiles.splice(12, 0, {\r\n        isRevealed: false,\r\n        sandCount: 0,\r\n        type: \"storm\",\r\n        finalParts: []\r\n    });\r\n\r\n    //setup sand\r\n    const sandTiles = [2, 6, 8, 10, 14, 16, 18, 22];\r\n    for (var i = 0; i < sandTiles.length; i++) {\r\n        tiles[sandTiles[i]].sandCount = 1;\r\n    }\r\n    return tiles;\r\n}\r\n\r\nvar setupEquipment = () => {\r\n    var deck = [];\r\n    for (var i = 0; i < 3; i++) {\r\n        deck.push(\"Jet Pack\");\r\n    }\r\n    for (var i = 0; i < 3; i++) {\r\n        deck.push(\"Dune Blaster\");\r\n    }\r\n    for (var i = 0; i < 2; i++) {\r\n        deck.push(\"Terrascope\");\r\n    }\r\n    for (var i = 0; i < 2; i++) {\r\n        deck.push(\"Solar Shield\");\r\n    }\r\n    deck.push(\"Secret Water Reserve\");\r\n    deck.push(\"Time Throttle\");\r\n    shuffle(deck);\r\n    return deck;\r\n}\r\n\r\n//https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array lol sorry :(\r\nfunction shuffle(array) {\r\n    var currentIndex = array.length, randomIndex;\r\n\r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n\r\n        // Pick a remaining element...\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex--;\r\n\r\n        // And swap it with the current element.\r\n        [array[currentIndex], array[randomIndex]] = [\r\n            array[randomIndex], array[currentIndex]];\r\n    }\r\n\r\n    return array;\r\n}","import React from 'react';\r\nimport './board.css'\r\n\r\nexport class ForbiddenDesertBoard extends React.Component {\r\n    state = {\r\n        assignID: 0,\r\n        assignDifficulty: false,\r\n        digging: false,\r\n        chooseCarry: false,\r\n        chooseNavigate: false,\r\n        duneBlasting: false,\r\n        duneBlastingPlayerID: -1,\r\n        duneBlastingInventoryID: -1,\r\n        excavateErrorMsg: '',\r\n        mitigateErrorMsg: '',\r\n        carryErrorMsg: '',\r\n        dropErrorMsg: '',\r\n    }\r\n\r\n    assignRoleTo(playerID, role) {\r\n        this.props.moves.setPlayerInfo(playerID, role);\r\n        this.setState({ assignID: this.state.assignID + 1 });\r\n    }\r\n    assignDifficultyTo(diff) {\r\n        this.props.moves.setDifficulty(diff);\r\n        this.setState({ assignDifficulty: true })\r\n    }\r\n    //move, or dig if this.state.digging, or dune blast if this.state.duneBlasting\r\n    onClickTile(id) {\r\n        var currentPlayerID;\r\n        if (this.state.duneBlasting) {\r\n            currentPlayerID = this.state.duneBlastingPlayerID;\r\n            if (this.isBuried()) {\r\n                if (this.isSameTile(id)) {\r\n                    this.props.moves.duneBlaster(currentPlayerID, this.state.duneBlastingInventoryID, id);\r\n                    this.setState({\r\n                        duneBlasting: false,\r\n                        duneBlastingPlayerID: -1,\r\n                        duneBlastingInventoryID: -1,\r\n                    });\r\n                }\r\n            }\r\n            else if (this.isAdjacentTile(id) || this.isSameTile(id) ||\r\n                (this.isDiagonalTile(id) && this.props.G.players[currentPlayerID].role === \"Explorer\")) {\r\n                if (this.props.G.tiles[id].sandCount > 0) {\r\n                    this.props.moves.duneBlaster(currentPlayerID, this.state.duneBlastingInventoryID, id);\r\n                    this.setState({\r\n                        duneBlasting: false,\r\n                        duneBlastingPlayerID: -1,\r\n                        duneBlastingInventoryID: -1,\r\n                    });\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this.props.G.isNavigating ? currentPlayerID = this.props.G.navigatingID : currentPlayerID = this.props.ctx.currentPlayer;\r\n            if (this.isBuried()) {\r\n                //you can only dig when buried\r\n                if (this.isSameTile(id) && this.state.digging && this.props.G.tiles[id].sandCount > 0) {\r\n                    this.props.moves.dig(id);\r\n                    this.setState({ digging: false });\r\n                }\r\n            }\r\n            else if (this.isAdjacentTile(id) || this.isSameTile(id) ||\r\n                (this.isDiagonalTile(id) && this.props.G.players[currentPlayerID].role === \"Explorer\")) {\r\n                if (this.state.digging && this.props.G.tiles[id].sandCount > 0) {\r\n                    this.props.moves.dig(id);\r\n                    this.setState({ digging: false });\r\n                }\r\n                else if (!this.isSameTile(id) &&\r\n                    (this.props.G.tiles[id].sandCount < 2 || this.props.G.players[currentPlayerID].role === \"Climber\")\r\n                    && !this.state.digging) {\r\n                    this.props.moves.move(id);\r\n                }\r\n            }\r\n            //move through tunnel\r\n            else if (this.props.G.tiles[id].type === \"tunnel\" && this.props.G.tiles[id].isRevealed &&\r\n                this.props.G.tiles[this.props.G.players[currentPlayerID].position].type === \"tunnel\" &&\r\n                this.props.G.tiles[this.props.G.players[currentPlayerID].position].isRevealed &&\r\n                this.props.G.tiles[id].sandCount < 2 && !this.state.digging) {\r\n                this.props.moves.move(id);\r\n            }\r\n        }\r\n    }\r\n    excavate() {\r\n        if (this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].isRevealed === true) {\r\n            this.setState({ excavateErrorMsg: \"This tile is already excavated!\" })\r\n            setTimeout(() => this.setState({ excavateErrorMsg: '' }), 3000);\r\n        }\r\n        else if (this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].sandCount !== 0) {\r\n            this.setState({ excavateErrorMsg: \"Remove all sand on this tile before excavating!\" })\r\n            setTimeout(() => this.setState({ excavateErrorMsg: '' }), 3000);\r\n        }\r\n        else {\r\n            this.props.moves.excavate();\r\n        }\r\n    }\r\n    giveWaterTo(giverID, receiverID) {\r\n        if (this.props.G.players[giverID].water === 0) {\r\n            this.setState({ waterErrorMsg: \"You don't have enough water!\" });\r\n            setTimeout(() => this.setState({ waterErrorMsg: '' }), 3000);\r\n        }\r\n        else if (this.props.G.players[receiverID].water === this.props.G.players[receiverID].maxWater) {\r\n            this.setState({ waterErrorMsg: \"Target has full water!\" });\r\n            setTimeout(() => this.setState({ waterErrorMsg: '' }), 3000);\r\n        }\r\n        else {\r\n            this.props.moves.giveWater(giverID, receiverID);\r\n        }\r\n    }\r\n    giveEquipmentTo(player, index, targetPlayerID) {\r\n        this.props.moves.giveEquipment(player, index, targetPlayerID);\r\n    }\r\n    pickUpFinalPart() {\r\n        //no need to check condition; button won't show up if it's not met\r\n        this.props.moves.pickUpFinalPart();\r\n    }\r\n    mitigate() {\r\n        if (this.props.G.numDraws > 0) {\r\n            this.props.moves.mitigate();\r\n        }\r\n        else {\r\n            this.setState({ mitigateErrorMsg: \"All storm cards already mitigated!\" })\r\n            setTimeout(() => this.setState({ mitigateErrorMsg: '' }), 3000);\r\n        }\r\n    }\r\n    navigate(id) {\r\n        this.setState({ chooseNavigate: false })\r\n        this.props.moves.navigate(id);\r\n    }\r\n    collectWater() {\r\n        this.props.moves.collectWater();\r\n    }\r\n    carry(playerID) {\r\n        this.setState({ chooseCarry: false, carrying: true });\r\n        this.props.moves.carry(playerID);\r\n    }\r\n    drop() {\r\n        var currentPlayerID;\r\n        this.props.G.isNavigating ? currentPlayerID = this.props.G.navigatingID : currentPlayerID = this.props.ctx.currentPlayer;\r\n\r\n        this.setState({ chooseCarry: false, carrying: false });\r\n        if (this.props.G.players[currentPlayerID].carryingPlayer === -1) {\r\n            this.setState({ dropErrorMsg: \"Nobody to drop! Carry first.\" });\r\n            setTimeout(() => this.setState({ dropErrorMsg: '' }), 3000);\r\n        }\r\n        else {\r\n            this.props.moves.drop();\r\n        }\r\n    }\r\n    useEquipment(playerID, equipmentIndex, equipmentName) {\r\n        if (equipmentName === \"Dune Blaster\") {\r\n            if (playerID === this.state.duneBlastingPlayerID) {\r\n                this.setState({\r\n                    digging: false,\r\n                    duneBlasting: false,\r\n                    duneBlastingPlayerID: -1,\r\n                    duneBlastingInventoryID: -1\r\n                });\r\n            }\r\n            else {\r\n                this.setState({\r\n                    digging: false,\r\n                    duneBlasting: true,\r\n                    duneBlastingPlayerID: playerID,\r\n                    duneBlastingInventoryID: equipmentIndex\r\n                });\r\n            }\r\n            //the actual move happens in onClickTile\r\n        }\r\n        else if (equipmentName === \"Jet Pack\") {\r\n\r\n        }\r\n        else if (equipmentName === \"Solar Shield\") {\r\n\r\n        }\r\n        else if (equipmentName === \"Terrascope\") {\r\n\r\n        }\r\n        else if (equipmentName === \"Secret Water Reserve\") {\r\n\r\n        }\r\n        else if (equipmentName === \"Time Throttle\") {\r\n\r\n        }\r\n    }\r\n    //SPAGHETTI CODE ALERT: PARAMETERS ARE VERY INCONSISTENT ACROSS THESE FUNCTIONS\r\n    //SOME ARE TILE ID'S OR SOMETHING, SOME ARE PLAYER ID'S\r\n    //honestly these one-parameter methods shouldn't exist. but i would have to refactor a LOT if i were to fix it\r\n    isAdjacentTile(id) {\r\n        var currentPlayerID;\r\n        this.props.G.isNavigating ? currentPlayerID = this.props.G.navigatingID : currentPlayerID = this.props.ctx.currentPlayer;\r\n        if (this.state.duneBlasting) {\r\n            currentPlayerID = this.state.duneBlastingPlayerID\r\n        }\r\n\r\n        const currentPlayerPos = this.props.G.players[currentPlayerID].position;\r\n        var check1 = id >= 0 && id <= 24 &&\r\n            (id === currentPlayerPos - 1 || id === currentPlayerPos + 1 ||\r\n                id === currentPlayerPos - 5 || id === currentPlayerPos + 5);\r\n        if (id === currentPlayerPos - 1 || id === currentPlayerPos + 1) {\r\n            //check2 is to prevent moving across the entire board, e.g. between 4-5, 9-10, etc.\r\n            var check2 = (Math.floor(id / 5) === Math.floor(currentPlayerPos / 5));\r\n            return check2;\r\n        }\r\n        else {\r\n            return check1;\r\n        }\r\n    }\r\n    isAdjacentTile2(playerID1, playerID2) {\r\n        var pos1 = this.props.G.players[playerID1].position;\r\n        var pos2 = this.props.G.players[playerID2].position;\r\n        var check1 =\r\n            (pos1 === pos2 - 1 || pos1 === pos2 + 1 ||\r\n                pos1 === pos2 - 5 || pos1 === pos2 + 5);\r\n        if (pos1 === pos2 - 1 || pos1 === pos2 + 1) {\r\n            //check2 is to prevent moving across the entire board, e.g. between 4-5, 9-10, etc.\r\n            var check2 = (Math.floor(pos1 / 5) === Math.floor(pos2 / 5));\r\n            return check2;\r\n        }\r\n        else {\r\n            return check1;\r\n        }\r\n    }\r\n    isSameTile(id) {\r\n        var currentPlayerID;\r\n        this.props.G.isNavigating ? currentPlayerID = this.props.G.navigatingID : currentPlayerID = this.props.ctx.currentPlayer;\r\n        if (this.state.duneBlasting) {\r\n            currentPlayerID = this.state.duneBlastingPlayerID\r\n        }\r\n\r\n        return (id === this.props.G.players[currentPlayerID].position);\r\n    }\r\n    isSameTile2(playerID1, playerID2) {\r\n        return (this.props.G.players[playerID1].position === this.props.G.players[playerID2].position);\r\n    }\r\n    isDiagonalTile(id) {\r\n        var currentPlayerID;\r\n        this.props.G.isNavigating ? currentPlayerID = this.props.G.navigatingID : currentPlayerID = this.props.ctx.currentPlayer;\r\n        if (this.state.duneBlasting) {\r\n            currentPlayerID = this.state.duneBlastingPlayerID\r\n        }\r\n\r\n        const currentPlayerPos = this.props.G.players[currentPlayerID].position;\r\n        var check1 = id >= 0 && id <= 24 &&\r\n            (id === currentPlayerPos - 6 || id === currentPlayerPos - 4 ||\r\n                id === currentPlayerPos + 4 || id === currentPlayerPos + 6);\r\n        //check2 is to make sure id is exactly one row away from the current tile\r\n        var check2 = Math.abs(Math.floor(id / 5) - Math.floor(currentPlayerPos / 5)) === 1;\r\n        return check1 && check2;\r\n    }\r\n    isDiagonalTile2(playerID1, playerID2) {\r\n        var pos1 = this.props.G.players[playerID1].position;\r\n        var pos2 = this.props.G.players[playerID2].position;\r\n        var check1 =\r\n            (pos1 === playerID2 - 6 || pos1 === playerID2 - 4 ||\r\n                pos1 === playerID2 + 4 || pos1 === playerID2 + 6);\r\n        //check2 is to make sure id is exactly one row away from the current tile\r\n        var check2 = Math.abs(Math.floor(pos1 / 5) - Math.floor(playerID2 / 5)) === 1;\r\n        return check1 && check2;\r\n    }\r\n    endTurn() {\r\n        this.setState({ digging: false, duneBlasting: false });\r\n        this.props.events.endTurn();\r\n    }\r\n\r\n    //for idToStateClass purposes, not onClickTile\r\n    tileIsMovable(id) {\r\n        var currentPlayerID;\r\n        this.props.G.isNavigating ? currentPlayerID = this.props.G.navigatingID : currentPlayerID = this.props.ctx.currentPlayer;\r\n\r\n        if (this.isBuried()) {\r\n            return false;\r\n        }\r\n        else {\r\n            return (this.isAdjacentTile(id)\r\n                || (this.props.G.players[currentPlayerID].role === \"Explorer\" && this.isDiagonalTile(id))\r\n                || (this.props.G.tiles[this.props.G.players[currentPlayerID].position].type === \"tunnel\"\r\n                    && this.props.G.tiles[this.props.G.players[currentPlayerID].position].isRevealed\r\n                    && this.props.G.tiles[id].type === \"tunnel\" && this.props.G.tiles[id].isRevealed))\r\n                && !this.isSameTile(id)\r\n                && (this.props.G.tiles[id].sandCount < 2 || this.props.G.players[currentPlayerID].role === \"Climber\")\r\n                && !this.state.digging && !this.isBuried();\r\n        }\r\n    }\r\n    //for idToStateClass purposes, not onClickTile\r\n    tileIsDiggable(id) {\r\n        if (this.isBuried()) {\r\n            return this.isSameTile(id) && (this.state.digging || this.state.duneBlasting) && this.props.G.tiles[id].sandCount > 0;\r\n            //last condition here should always be true lol\r\n        }\r\n        else {\r\n            return (this.isAdjacentTile(id) || this.isSameTile(id)\r\n                || (this.props.G.players[(this.state.duneBlasting ? this.state.duneBlastingPlayerID : this.props.ctx.currentPlayer)].role === \"Explorer\" && this.isDiagonalTile(id)))\r\n                && (this.state.digging || this.state.duneBlasting) && this.props.G.tiles[id].sandCount > 0;\r\n        }\r\n    }\r\n    //returns whether current player is buried\r\n    isBuried() {\r\n        var currentPlayerID;\r\n        this.props.G.isNavigating ? currentPlayerID = this.props.G.navigatingID : currentPlayerID = this.props.ctx.currentPlayer;\r\n        if (this.state.duneBlasting) {\r\n            currentPlayerID = this.state.duneBlastingPlayerID\r\n        }\r\n\r\n        //check if current tile has a climber on it;\r\n        //iterate through all players, and check if a climber's position is current position\r\n        const currPos = this.props.G.players[currentPlayerID].position;\r\n        for (var i = 0; i < this.props.G.players.length; i++) {\r\n            if (this.props.G.players[i].role === \"Climber\" && this.props.G.players[i].position === currPos) {\r\n                return false;\r\n            }\r\n        }\r\n        return this.props.G.tiles[currPos].sandCount > 1;\r\n    }\r\n\r\n    render() {\r\n        //role selection screen\r\n        if (this.state.assignID < this.props.ctx.numPlayers) {\r\n            return (\r\n                <div className=\"center\">\r\n                    <div id=\"title\">\r\n                        Role Selection\r\n                    </div>\r\n                    <div className=\"header\">\r\n                        Choose role for Player {this.state.assignID}:\r\n                    </div>\r\n                    <p></p>\r\n                    <div>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Archeologist\"); }}>\r\n                            Archeologist\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Climber\"); }}>\r\n                            Climber\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Explorer\"); }}>\r\n                            Explorer\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Meteorologist\"); }}>\r\n                            Meteorologist\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Navigator\"); }}>\r\n                            Navigator\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Water Carrier\"); }}>\r\n                            Water Carrier\r\n                        </button>\r\n                    </div>\r\n                    <p></p>\r\n                    <div>\r\n                        <div>\r\n                            <p id=\"header\">Archeologist (3)</p>\r\n                            <ul>\r\n                                <li>Removes 2 sand when digging instead of 1.</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Climber (3)</p>\r\n                            <ul>\r\n                                <li>Carry: moves 1 other player along with Climber. (Cost: free)</li>\r\n                                <li>Can move over tiles with 2 or more sand.</li>\r\n                                <li>Allows all players on Climber's current tile to leave even with 2 or more sand.</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Explorer (4)</p>\r\n                            <ul>\r\n                                <li>Can move, dig, and use items diagonally.</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Meteorologist (4)</p>\r\n                            <ul>\r\n                                <li>Mitigate: draw 1 less Storm at the end of the turn. (Cost: 1 action)</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Navigator (4)</p>\r\n                            <ul>\r\n                                <li>Navigate: move another player up to 3 tiles. Climber and Explorer keep their abilities. (Cost: 1 action)</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Water Carrier (5)</p>\r\n                            <ul>\r\n                                <li>Collect Water: take 2 water from an excavated well. (Cost: 1 action)</li>\r\n                                <li>Can give water to adjacent players (for free).</li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        //difficulty selection screen\r\n        if (this.state.assignDifficulty === false) {\r\n            return (\r\n                <div className=\"center\">\r\n                    <div id=\"title\">\r\n                        Difficulty Selection\r\n                    </div>\r\n                    <p></p>\r\n                    <div>\r\n                        <button onClick={() => { this.assignDifficultyTo(0); }}>\r\n                            Novice\r\n                        </button>\r\n                        <button onClick={() => { this.assignDifficultyTo(1); }}>\r\n                            Normal\r\n                        </button>\r\n                        <button onClick={() => { this.assignDifficultyTo(2); }}>\r\n                            Elite\r\n                        </button>\r\n                        <button onClick={() => { this.assignDifficultyTo(3); }}>\r\n                            Legendary\r\n                        </button>\r\n                    </div>\r\n                    <p></p>\r\n                    <div>\r\n                        (Difficulty sets the starting storm level.)\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        var currentPlayerID;\r\n        this.props.G.isNavigating ? currentPlayerID = this.props.G.navigatingID : currentPlayerID = this.props.ctx.currentPlayer;\r\n\r\n        //adds class to render borders on appropriate tiles when this.state.digging\r\n        //or when moving (!this.state.digging)\r\n        let idToStateClass =\r\n            new Array(25).fill(\" \")\r\n                .map((currentClass, tileID, _) => {\r\n                    if ((this.state.digging || this.state.duneBlasting)\r\n                        && this.tileIsDiggable(tileID) && this.props.G.numMoves < 4 && !this.props.ctx.gameover) {\r\n                        return `${currentClass} diggable` // Add the `diggable` class to this\r\n                    } else {\r\n                        return `${currentClass}`; // Do not add any more classes\r\n                    }\r\n                }) // You can chain additional `map` function calls if you need to add more classes to a tile based on the current state of your program\r\n                .map((currentClass, tileID, _) => {\r\n                    if (!(this.state.digging || this.state.duneBlasting)\r\n                        && this.tileIsMovable(tileID)\r\n                        && ((!this.props.G.isNavigating && this.props.G.numMoves < 4) || (this.props.G.isNavigating && this.props.G.navigatingNumMoves < 3))\r\n                        && !this.props.ctx.gameover) {\r\n                        return `${currentClass} movable`\r\n                    } else {\r\n                        return `${currentClass}`;\r\n                    }\r\n                }) // May be problematic if you somehow add multiple classes that have conflicting properties\r\n\r\n        var tiles = [];\r\n        for (var i = 0; i < 5; i++) {\r\n            var row = [];\r\n            for (var j = 0; j < 5; j++) {\r\n                var tile = [];\r\n                const id = 5 * i + j;\r\n                if (this.props.G.tiles[id].type === \"storm\") {\r\n                    //render finalParts if it has at least one\r\n                    if (this.props.G.tiles[id].finalParts.length > 0) {\r\n                        tile.push(<div className=\"final-part\">Parts: {this.props.G.tiles[id].finalParts}</div>)\r\n                    }\r\n                    row.push(<td className=\"storm\">{tile}</td>);\r\n                }\r\n                else {\r\n                    var playersOnThisTile = [];\r\n                    //render players on current tile\r\n                    for (var k = 0; k < this.props.G.players.length; k++) {\r\n                        if (this.props.G.players[k].position === id) {\r\n                            playersOnThisTile.push(k);\r\n                        }\r\n                    }\r\n                    tile.push(<div className=\"player\">{playersOnThisTile}</div>);\r\n                    //render sandCount\r\n                    if (this.props.G.tiles[id].sandCount !== 0) {\r\n                        var sandIndicator = \"\";\r\n                        for (var l = 0; l < this.props.G.tiles[id].sandCount; l++) {\r\n                            sandIndicator = sandIndicator.concat(\"l\");\r\n                        }\r\n                        tile.push(<div className={this.props.G.tiles[id].sandCount > 1 ? \"sand red\" : \"sand\"}>\r\n                            {sandIndicator}</div>);\r\n                    }\r\n                    //render finalParts if it has at least one\r\n                    if (this.props.G.tiles[id].finalParts.length > 0) {\r\n                        tile.push(<div className=\"final-part\">Parts: {this.props.G.tiles[id].finalParts}</div>)\r\n                    }\r\n                    //render unrevealed backgrounds (set by className CSS)\r\n                    if (this.props.G.tiles[id].isRevealed === false) {\r\n                        row.push(<td key={id} className={(this.props.G.tiles[id].type === \"well\" || this.props.G.tiles[id].type === \"mirage\" ?\r\n                            \"unrevealed-water\" : \"unrevealed\") + idToStateClass[id]} onClick={() => this.onClickTile(id)}>{tile}</td>);\r\n                    }\r\n                    //render clue tile (assign the right className)\r\n                    else if (this.props.G.tiles[id].type === \"clue\") {\r\n                        const className = this.props.G.tiles[id].part + this.props.G.tiles[id].pos + idToStateClass[id];\r\n                        row.push(<td key={id} className={className + idToStateClass[id]}\r\n                            onClick={() => this.onClickTile(id)}>{tile}</td>);\r\n                    }\r\n                    else {\r\n                        row.push(<td key={id} className={this.props.G.tiles[id].type + idToStateClass[id]}\r\n                            onClick={() => this.onClickTile(id)}>{tile}</td>);\r\n                    }\r\n                }\r\n            }\r\n            tiles.push(<tr key={i}>{row}</tr>);\r\n        }\r\n\r\n        var header = [];\r\n        if (this.props.ctx.gameover) {\r\n            if (this.props.ctx.gameover.win) {\r\n                header.push(\r\n                    <div>\r\n                        VICTORY (Difficulty: {this.props.G.difficultyName})\r\n                    </div>\r\n                )\r\n            }\r\n            else {\r\n                header.push(\r\n                    <div>\r\n                        DEFEAT (Difficulty: {this.props.G.difficultyName})\r\n                    </div>\r\n                )\r\n            }\r\n        }\r\n        if (this.props.G.isNavigating) {\r\n            header.push(\r\n                <div>\r\n                    <div>\r\n                        Player {this.props.ctx.currentPlayer} navigating Player {this.props.G.navigatingID}\r\n                    </div>\r\n                    <div>\r\n                        Actions left in navigation: {3 - this.props.G.navigatingNumMoves}, Actions left in turn: {4 - this.props.G.numMoves}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            header.push(\r\n                <div>\r\n                    <div>\r\n                        Player {this.props.ctx.currentPlayer}'s turn\r\n                    </div>\r\n                    <div>\r\n                        Actions left in turn: {4 - this.props.G.numMoves}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        var actionButtons = [];\r\n        if (this.isBuried()) {\r\n            actionButtons.push(\r\n                <div>\r\n                    You are buried!\r\n                </div>\r\n            )\r\n        }\r\n        if (!this.props.G.isNavigating) {\r\n            actionButtons.push(\r\n                <div>\r\n                    <button accessKey=\"d\" onClick={() => { this.setState({ digging: !this.state.digging, duneBlasting: false }); }}>\r\n                        Dig (1)\r\n                    </button>\r\n                    <button accessKey=\"x\" onClick={() => { this.excavate(); }}>\r\n                        Excavate (1)\r\n                    </button>\r\n                    <div>\r\n                        {this.state.digging ? \"Choose a tile to dig.\" : \"\"}\r\n                    </div>\r\n                </div>\r\n            );\r\n            actionButtons.push(\r\n                <div>\r\n                    {this.state.excavateErrorMsg}\r\n                </div>\r\n            )\r\n            //Mitigate for meteorologist only\r\n            if (this.props.G.players[this.props.ctx.currentPlayer].role === \"Meteorologist\") {\r\n                actionButtons.push(\r\n                    <button onClick={() => { this.mitigate(); }}>\r\n                        Mitigate (1)\r\n                    </button>\r\n                )\r\n            }\r\n            actionButtons.push(\r\n                <div>\r\n                    {this.state.mitigateErrorMsg}\r\n                </div>\r\n            )\r\n            //collectWater for water carrier only\r\n            if (this.props.G.players[this.props.ctx.currentPlayer].role === \"Water Carrier\"\r\n                && this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].type === \"well\"\r\n                && this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].isRevealed\r\n                && this.props.G.players[this.props.ctx.currentPlayer].water < this.props.G.players[this.props.ctx.currentPlayer].maxWater) {\r\n                actionButtons.push(\r\n                    <button onClick={() => { this.collectWater(); }}>\r\n                        Collect +2 water (1)\r\n                    </button>\r\n                )\r\n            }\r\n        }\r\n\r\n        //carry for climber only\r\n        if (this.props.G.players[currentPlayerID].role === \"Climber\") {\r\n            actionButtons.push(\r\n                <div>\r\n                    <button onClick={() => { this.setState({ chooseCarry: !this.state.chooseCarry }) }}>\r\n                        Carry (0):\r\n                    </button>\r\n                    <button onClick={() => { this.drop(); }}>\r\n                        Drop (0)\r\n                    </button>\r\n                </div>\r\n            )\r\n            //spawn choose player buttons\r\n            if (this.state.chooseCarry) {\r\n                //find if there are any players on current tile\r\n                var playersFound = false;\r\n                for (var i = 0; i < this.props.G.players.length; i++) {\r\n                    const index = i;\r\n                    if (index != currentPlayerID &&\r\n                        this.isSameTile(this.props.G.players[index].position)) {\r\n                        actionButtons.push(\r\n                            <button onClick={() => { this.carry(index); }}>\r\n                                Player {index}\r\n                            </button>\r\n                        );\r\n                        playersFound = true;\r\n                    }\r\n                }\r\n                //spawned no buttons?\r\n                if (!playersFound) {\r\n                    this.setState({ chooseCarry: false, carryErrorMsg: \"Nobody to carry! (They must be on the same tile.)\" });\r\n                    setTimeout(() => this.setState({ carryErrorMsg: '' }), 3000);\r\n                }\r\n            }\r\n        }\r\n        actionButtons.push(\r\n            <div>\r\n                {this.state.carryErrorMsg}\r\n            </div>\r\n        )\r\n        actionButtons.push(\r\n            <div>\r\n                {this.state.dropErrorMsg}\r\n            </div>\r\n        )\r\n\r\n        //only show pickup part button when the tile of the current player position\r\n        //has at least 1 finalPart, and the tile is revealed\r\n        if (!this.props.G.isNavigating) {\r\n            if (this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].isRevealed &&\r\n                this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].finalParts.length > 0) {\r\n                actionButtons.push(\r\n                    <button onClick={() => { this.pickUpFinalPart(); }}>\r\n                        Pick up part (1)\r\n                    </button>\r\n                )\r\n            }\r\n        }\r\n\r\n        //navigator only\r\n        if (!this.props.G.isNavigating) {\r\n            if (this.props.G.players[this.props.ctx.currentPlayer].role === \"Navigator\") {\r\n                actionButtons.push(\r\n                    <button onClick={() => { this.setState({ chooseNavigate: !this.state.chooseNavigate }) }}>\r\n                        Navigate (1):\r\n                    </button>\r\n                );\r\n            }\r\n            //spawn choose player buttons\r\n            if (this.state.chooseNavigate) {\r\n                for (var i = 0; i < this.props.G.players.length; i++) {\r\n                    const index = i;\r\n                    if (index != this.props.ctx.currentPlayer) {\r\n                        actionButtons.push(\r\n                            <button onClick={() => { this.navigate(index); }}>\r\n                                Player {index}\r\n                            </button>\r\n                        );\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.props.G.isNavigating) {\r\n            actionButtons.push(\r\n                <div>\r\n                    <button accessKey=\"z\" onClick={() => { this.props.undo(); }}>\r\n                        Undo\r\n                    </button>\r\n                    <button accessKey=\"e\" onClick={() => { this.props.moves.stopNavigating() }}>\r\n                        End navigation\r\n                    </button>\r\n                </div>\r\n            )\r\n        }\r\n        else {\r\n            actionButtons.push(\r\n                <div>\r\n                    <button accessKey=\"z\" onClick={() => { this.props.undo(); }}>\r\n                        Undo\r\n                    </button>\r\n                    <button accessKey=\"e\" onClick={() => { this.endTurn(); }}>\r\n                        End turn\r\n                    </button>\r\n                </div>\r\n            )\r\n        }\r\n\r\n        var rightbar = [];\r\n        //player info\r\n        rightbar.push(\r\n            <div>\r\n                {this.state.waterErrorMsg}\r\n            </div>\r\n        );\r\n        if (this.state.duneBlasting) {\r\n            rightbar.push(\r\n                <div>\r\n                    Choose a tile to use Dune Blast.\r\n                </div>\r\n            )\r\n        }\r\n        rightbar.push(<div>Players:</div>)\r\n        var playerInfoList = [];\r\n        for (var i = 0; i < this.props.ctx.numPlayers; i++) {\r\n            //setup water buttons\r\n            var giveWaterButtons = [];\r\n            for (var j = 0; j < this.props.ctx.numPlayers; j++) {\r\n                const giver = i;\r\n                const index = j;\r\n                if (index !== giver\r\n                    && (this.isSameTile2(giver, index)\r\n                        || (this.props.G.players[giver].role === \"Water Carrier\" &&\r\n                            this.isAdjacentTile2(giver, index)))) {\r\n                    giveWaterButtons.push(\r\n                        <button className=\"small-button\" onClick={() => { this.giveWaterTo(giver, index); }}>\r\n                            {index}\r\n                        </button>\r\n                    );\r\n                }\r\n            }\r\n            //listing + water buttons\r\n            if (this.props.G.players[i].role === \"Climber\" && this.props.G.players[i].carryingPlayer !== -1) {\r\n                playerInfoList.push(\r\n                    <div>\r\n                        {i} - {this.props.G.players[i].role}  {this.props.G.players[i].water} / {this.props.G.players[i].maxWater}&nbsp;\r\n                        - Carrying Player {this.props.G.players[i].carryingPlayer}&nbsp;\r\n                        - Give water to: {giveWaterButtons}\r\n                    </div>\r\n                );\r\n            }\r\n            else {\r\n                playerInfoList.push(\r\n                    <div>\r\n                        {i} - {this.props.G.players[i].role}  {this.props.G.players[i].water} / {this.props.G.players[i].maxWater}&nbsp;\r\n                        - Give water to: {giveWaterButtons}\r\n                    </div>\r\n                );\r\n            }\r\n            //equipment\r\n            for (var k = 0; k < this.props.G.players[i].equipment.length; k++) {\r\n                const player = i;\r\n                const index = k;\r\n                //setup give buttons\r\n                var giveEquipmentButtons = [];\r\n                //oh god too many loop variables too many inconsistent names im so bad :(\r\n                for (var l = 0; l < this.props.ctx.numPlayers; l++) {\r\n                    const targetPlayerID = l;\r\n                    if (targetPlayerID !== player && (this.isSameTile2(player, targetPlayerID))) {\r\n                        giveEquipmentButtons.push(\r\n                            <button className=\"small-button\" onClick={() => { this.giveEquipmentTo(player, index, targetPlayerID); }}>\r\n                                {targetPlayerID}\r\n                            </button>\r\n                        );\r\n                    }\r\n                }\r\n                playerInfoList.push(\r\n                    <div>\r\n                        {this.props.G.players[player].equipment[index]} -&nbsp;\r\n                        <button className=\"small-button\" onClick={() => {\r\n                            this.useEquipment(player, index, this.props.G.players[player].equipment[index]);\r\n                        }}>\r\n                            Use\r\n                        </button> - Give to: {giveEquipmentButtons}\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n        rightbar.push(playerInfoList);\r\n\r\n        rightbar.push(\r\n            <div>\r\n                <p></p>\r\n                <div>Current storm level: {this.props.G.stormLevel}</div>\r\n                <p></p>\r\n            </div>\r\n        );\r\n\r\n        //storm deck last turn\r\n        rightbar.push(\r\n            <div>\r\n                <p></p>\r\n                End of last turn:\r\n            </div>\r\n        );\r\n        for (var i = 0; i < this.props.G.lastDrawType.length; i++) {\r\n            rightbar.push(\r\n                <div>\r\n                    {this.props.G.lastDrawType[i]}\r\n                </div>\r\n            );\r\n        }\r\n        //probabilities\r\n        rightbar.push(\r\n            <div>\r\n                <p></p>\r\n                <div>\r\n                    Chance of 1+ Sun Beats Down at end of turn:&nbsp;\r\n                    {((1 - (1 - this.props.G.sunBeatsDownProb / 100) ** (this.props.G.numDraws)) * 100).toFixed(2)}%\r\n                </div>\r\n                <div>\r\n                    Chance of 1+ Storm Picks Up at end of turn:&nbsp;\r\n                    {((1 - (1 - this.props.G.stormPicksUpProb / 100) ** (this.props.G.numDraws)) * 100).toFixed(2)}%\r\n                </div>\r\n            </div>\r\n        );\r\n        //currently collected parts\r\n        var partList = [];\r\n        for (var i = 0; i < this.props.G.collectedParts.length; i++) {\r\n            var color;\r\n            if (this.props.G.collectedParts[i] === \"A\") {\r\n                color = \"red\";\r\n            }\r\n            else if (this.props.G.collectedParts[i] === \"B\") {\r\n                color = \"green\";\r\n            }\r\n            else if (this.props.G.collectedParts[i] === \"C\") {\r\n                color = \"blue\";\r\n            }\r\n            else if (this.props.G.collectedParts[i] === \"D\") {\r\n                color = \"purple\";\r\n            }\r\n            partList.push(\r\n                <div className={color}>\r\n                    {this.props.G.collectedParts[i]}\r\n                </div>\r\n            );\r\n        }\r\n        if (this.props.G.collectedParts.length === 0) {\r\n            rightbar.push(\r\n                <div>\r\n                    <p></p>\r\n                    Collected parts (4 total): none\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            rightbar.push(\r\n                <div>\r\n                    <p></p>\r\n                    Collected parts (4 total): {partList}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        var draw3, draw4, draw5, draw6, death;\r\n        if (this.props.ctx.numPlayers === 2) {\r\n            draw3 = \"1 - 3\";\r\n            draw4 = \"4 - 7\";\r\n            draw5 = \"8 - 10\";\r\n            draw6 = \"11 - 12\";\r\n            death = \"13\";\r\n        }\r\n        else if (this.props.ctx.numPlayers === 3 || this.props.ctx.numPlayers === 4) {\r\n            draw3 = \"1 - 4\";\r\n            draw4 = \"5 - 8\";\r\n            draw5 = \"9 - 11\";\r\n            draw6 = \"12 - 13\";\r\n            death = \"14\";\r\n        }\r\n        else if (this.props.ctx.numPlayers === 5) {\r\n            draw3 = \"1 - 5\";\r\n            draw4 = \"6 - 9\";\r\n            draw5 = \"10 - 12\";\r\n            draw6 = \"13 - 14\";\r\n            death = \"15\";\r\n        }\r\n\r\n        var infobar = []\r\n        infobar.push(\r\n            <div className=\"infobar\">\r\n                <p></p>\r\n                <div>\r\n                    Draw 2 at storm level 0\r\n                </div>\r\n                <div>\r\n                    Draw 3 at levels {draw3}\r\n                </div>\r\n                <div>\r\n                    Draw 4 at levels {draw4}\r\n                </div>\r\n                <div>\r\n                    Draw 5 at levels {draw5}\r\n                </div>\r\n                <div>\r\n                    Draw 6 at levels {draw6}\r\n                </div>\r\n                <div>\r\n                    Game over at level {death}\r\n                </div>\r\n                <p></p>\r\n                <div>\r\n                    Archeologist - removes 2 sand when digging\r\n                </div>\r\n                <div>\r\n                    Climber - can move over any tile; allows everyone on current tile to move.\r\n                </div>\r\n                <div>\r\n                    &emsp;Carry (0): bring another player\r\n                </div>\r\n                <div>\r\n                    Explorer - can move, dig, and use Dune Blaster diagonally\r\n                </div>\r\n                <div>\r\n                    Meteorologist - Mitigate (1): draw 1 less storm card at end of turn\r\n                </div>\r\n                <div>\r\n                    Navigator - Navigate (1): move any other player up to 3 tiles;\r\n                </div>\r\n                <div>\r\n                    &emsp;Climber and Explorer keep their abilities\r\n                </div>\r\n                <div>\r\n                    Water Carrier - can give water to adjacent players.\r\n                </div>\r\n                <div>\r\n                    &emsp;Collect Water (1): collect 2 water from a well\r\n                </div>\r\n                <p></p>\r\n                <div>\r\n                    Dune Blaster: dig all sand from a tile you can dig\r\n                </div>\r\n                <div>\r\n                    Jet Pack: move to any unblocked tile. Can carry one player on ride\r\n                </div>\r\n                <div>\r\n                    Secret Water Reserve: give 2 water to all players on current tile\r\n                </div>\r\n                <div>\r\n                    Solar Shield: prevent Sun Beats Down to all players on\r\n                </div>\r\n                <div>\r\n                    &emsp;the tile this was used, until user's next turn\r\n                </div>\r\n                <div>\r\n                    Terrascope: peek under an unexcavated tile\r\n                </div>\r\n                <div>\r\n                    Time Throttle (owner's turn only): gain 2 extra actions this turn\r\n                </div>\r\n                <p></p>\r\n                <div>\r\n                    Starting equipment deck:\r\n                </div>\r\n                <div>\r\n                    3x Dune Blaster, 3x Jet Pack,\r\n                </div>\r\n                <div>\r\n                    2x Solar Shield, 2x Terrascope,\r\n                </div>\r\n                <div>\r\n                    1x Secret Water Reserve, 1x Time Throttle\r\n                </div>\r\n                <p></p>\r\n                <div>Hotkeys:</div>\r\n                <div>Dig: shift + alt + d</div>\r\n                <div>Excavate: shift + alt + x</div>\r\n                <div>Undo: shift + alt + z</div>\r\n                <div>End turn / navigation: shift + alt + e</div>\r\n            </div>\r\n        )\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"fl\">\r\n                    <div className=\"header center\">\r\n                        {header}\r\n                    </div>\r\n                    <table>\r\n                        <tbody>{tiles}</tbody>\r\n                    </table>\r\n                    <div className=\"center\">\r\n                        {actionButtons}\r\n                    </div>\r\n                </div>\r\n                <div className=\"fl\">\r\n                    {rightbar}\r\n                </div>\r\n                <div className=\"fl\">\r\n                    {infobar}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { Client } from 'boardgame.io/react';\r\nimport { ForbiddenDesert } from './Game';\r\nimport { ForbiddenDesertBoard } from './board';\r\nimport './App.css';\r\n\r\nclass App extends React.Component {\r\n  state = { numPlayers: null };\r\n\r\n  render() {\r\n    if (this.state.numPlayers === null) {\r\n      return (\r\n        <div className=\"center\">\r\n          <div>\r\n            !! THIS IS A WORK IN PROGRESS !!\r\n          </div>\r\n          <div id=\"title\">\r\n            FORBIDDEN DESERT\r\n          </div>\r\n          <div>\r\n            Based off the original game by Gamewright, designed by Matt Leacock.\r\n          </div>\r\n          <div>\r\n            <a href=\"https://www.gamewright.com/gamewright/pdfs/Rules/ForbiddenDesertTM-RULES.pdf\" target=\"_blank\">Official rules manual</a>\r\n          </div>\r\n          <div>\r\n            <a href=\"https://boardgamegeek.com/boardgame/136063/forbidden-desert\" target=\"_blank\">BoardGameGeek listing</a>\r\n          </div>\r\n          <div>\r\n            <a href=\"https://github.com/hwabis/forbidden-desert\" target=\"_blank\">Source code</a>\r\n          </div>\r\n          <div id=\"header\">\r\n            <p>Select number of players:</p>\r\n            <button onClick={() => this.setState({ numPlayers: 2 })}>\r\n              2\r\n            </button>\r\n            <button onClick={() => this.setState({ numPlayers: 3 })}>\r\n              3\r\n            </button>\r\n            <button onClick={() => this.setState({ numPlayers: 4 })}>\r\n              4\r\n            </button>\r\n            <button onClick={() => this.setState({ numPlayers: 5 })}>\r\n              5\r\n            </button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      const ForbiddenDesertClient = Client({\r\n        game: ForbiddenDesert,\r\n        numPlayers: this.state.numPlayers,\r\n        board: ForbiddenDesertBoard,\r\n      });\r\n      return (\r\n        <div>\r\n          <ForbiddenDesertClient />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}