{"version":3,"sources":["Game.js","board.js","App.js","index.js"],"names":["ForbiddenDesert","setup","ctx","players","setupPlayers","numPlayers","tiles","setupTiles","stormLevel","numDraws","lastDrawType","collectedParts","stormPicksUpProb","sunBeatsDownProb","turnEnded","moves","move","G","pos","currentPlayer","position","dig","role","sandCount","excavate","currPos","isRevealed","type","i","length","water","maxWater","found","part","hid","vid","partName","index","finalParts","push","undoable","giveWater","id","noLimit","pickUpFinalPart","tempRemovedPart","splice","mitigate","collectWater","doNothing","events","endTurn","setPlayerInfo","setDifficulty","diff","removeWater","placeFinalPart","addSand","turn","moveLimit","onBegin","onEnd","draw","val","random","Die","bothQualify","doStormPicksUp","Math","min","stormPicksuPProb","stormPos","maxTilesAffected","windDirection","windStrength","affectedPos","candidatePos","floor","tempStormTile","prevPos","directionString","affectedPlayers","j","endIf","getRandomInt","max","array","randomIndex","currentIndex","shuffle","sandTiles","ForbiddenDesertBoard","state","assignID","assignDifficulty","digging","givingWater","excavateErrorMsg","waterErrorMsg","mitigateErrorMsg","this","props","setState","isBuried","isSameTile","isAdjacentTile","isDiagonalTile","setTimeout","currentPlayerPos","check1","check2","abs","className","onClick","assignRoleTo","assignDifficultyTo","idToStateClass","Array","fill","map","currentClass","tileID","_","tileIsDiggable","tileIsMovable","row","tile","playersOnThisTile","k","sandIndicator","l","concat","onClickTile","actionButtons","someoneFound","giveWaterTo","undo","rightbar","playerInfoList","toFixed","draw3","draw4","draw5","draw6","death","partList","color","numMoves","React","Component","App","href","ForbiddenDesertClient","Client","game","board","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.55fcb507.chunk.js","sourcesContent":["export const ForbiddenDesert = {\r\n    //there's a bug where sometimes (particularly when people are at 0 water),\r\n    //onEnd happens twice. i can't figure out the cause, but turnEnded should fix it\r\n    setup: (ctx) => ({\r\n        players: setupPlayers(ctx.numPlayers),\r\n        tiles: setupTiles(),\r\n        stormLevel: 0,\r\n        numDraws: 0,\r\n        lastDrawType: [],\r\n        collectedParts: [],\r\n        //for storm probability stuff (see sim.py)\r\n        stormPicksUpProb: 1,\r\n        sunBeatsDownProb: 1,\r\n        //for turn onEnd\r\n        turnEnded: false,\r\n    }),\r\n\r\n    moves: {\r\n        move: (G, ctx, pos) => {\r\n            G.players[ctx.currentPlayer].position = pos;\r\n        },\r\n        dig: (G, ctx, pos) => {\r\n            if (G.players[ctx.currentPlayer].role === \"Archeologist\") {\r\n                G.tiles[pos].sandCount -= 2;\r\n                if (G.tiles[pos].sandCount < 0) {\r\n                    G.tiles[pos].sandCount = 0;\r\n                }\r\n            }\r\n            else {\r\n                G.tiles[pos].sandCount--;\r\n            }\r\n        },\r\n        excavate: {\r\n            move: (G, ctx) => {\r\n                const currPos = G.players[ctx.currentPlayer].position;\r\n                G.tiles[currPos].isRevealed = true;\r\n                if (G.tiles[currPos].type === \"well\") {\r\n                    //everyone on currPos gets two water\r\n                    for (var i = 0; i < G.players.length; i++) {\r\n                        if (G.players[i].position === currPos) {\r\n                            G.players[i].water += 2;\r\n                        }\r\n                        if (G.players[i].water > G.players[i].maxWater) {\r\n                            G.players[i].water = G.players[i].maxWater;\r\n                        }\r\n                    }\r\n                }\r\n                else if (G.tiles[currPos].type === \"clue\") {\r\n                    //check if the other clue has also been revealed\r\n                    //if so, then generate finalPart on the appropriate tile\r\n                    var found = false;\r\n                    for (var i = 0; i < G.tiles.length; i++) {\r\n                        if (G.tiles[i].isRevealed && G.tiles[i].type === \"clue\" &&\r\n                            i !== currPos && G.tiles[i].part === G.tiles[currPos].part) {\r\n                            found = true;\r\n                        }\r\n                    }\r\n                    if (found) {\r\n                        var hid;\r\n                        var vid;\r\n                        var partName = G.tiles[currPos].part;\r\n                        for (var i = 0; i < G.tiles.length; i++) {\r\n                            if (G.tiles[i].part === partName && G.tiles[i].pos === \"h\") {\r\n                                hid = i;\r\n                            }\r\n                            if (G.tiles[i].part === partName && G.tiles[i].pos === \"v\") {\r\n                                vid = i;\r\n                            }\r\n                        }\r\n                        //index = (hid rounded down to the nearest multiple of 5) + (vid % 5)\r\n                        while ((hid % 5) !== 0 && hid >= 0) {\r\n                            hid -= 1;\r\n                        }\r\n                        const index = hid + (vid % 5);\r\n                        G.tiles[index].finalParts.push(partName);\r\n                    }\r\n                }\r\n            },\r\n            undoable: false\r\n        },\r\n        giveWater: {\r\n            move: (G, ctx, id) => {\r\n                G.players[ctx.currentPlayer].water -= 1;\r\n                G.players[id].water += 1;\r\n            },\r\n            noLimit: true\r\n        },\r\n        pickUpFinalPart: (G, ctx) => {\r\n            const tempRemovedPart = G.tiles[G.players[ctx.currentPlayer].position].finalParts[0];\r\n            //remove the first final part from tile\r\n            G.tiles[G.players[ctx.currentPlayer].position].finalParts.splice(0, 1);\r\n            //add to collected parts\r\n            G.collectedParts.push(tempRemovedPart);\r\n        },\r\n        mitigate: (G, ctx) => {\r\n            G.numDraws -= 1;\r\n        },\r\n        collectWater: (G, ctx) => {\r\n            G.players[ctx.currentPlayer].water += 2;\r\n            if (G.players[ctx.currentPlayer].water > G.players[ctx.currentPlayer].maxWater) {\r\n                G.players[ctx.currentPlayer].water = G.players[ctx.currentPlayer].maxWater;\r\n            }\r\n        },\r\n        doNothing: (G, ctx) => {\r\n            ctx.events.endTurn();\r\n        },\r\n        setPlayerInfo: {\r\n            move: (G, ctx, id, role) => {\r\n                G.players[id].role = role;\r\n                if (role === \"Archeologist\" || role === \"Climber\") {\r\n                    G.players[id].maxWater = 3;\r\n                    G.players[id].water = 3;\r\n                }\r\n                else if (role === \"Explorer\" || role === \"Meteorologist\" || role === \"Navigator\") {\r\n                    G.players[id].maxWater = 4;\r\n                    G.players[id].water = 4;\r\n                }\r\n                else {\r\n                    G.players[id].maxWater = 5;\r\n                    G.players[id].water = 5;\r\n                }\r\n            },\r\n            undoable: false,\r\n            noLimit: true\r\n        },\r\n        setDifficulty: {\r\n            move: (G, ctx, diff) => {\r\n                G.stormLevel = diff;\r\n                if (diff === 0) {\r\n                    G.numDraws = 2;\r\n                }\r\n                else {\r\n                    G.numDraws = 3;\r\n                }\r\n            },\r\n            undoable: false,\r\n            noLimit: true\r\n        },\r\n        //DEBUG ONLY\r\n        removeWater: {\r\n            move: (G, ctx, id) => {\r\n                G.players[id].water -= 1;\r\n            },\r\n            noLimit: true\r\n        },\r\n        placeFinalPart: {\r\n            move: (G, ctx, id) => {\r\n                G.tiles[id].finalParts.push(\"Z\");\r\n            },\r\n            noLimit: true\r\n        },\r\n        addSand: {\r\n            move: (G, ctx, id) => {\r\n                G.tiles[id].sandCount += 1;\r\n            },\r\n            noLimit: true\r\n        }\r\n    },\r\n\r\n    turn: {\r\n        moveLimit: 4,\r\n        onBegin: (G, ctx) => {\r\n            G.turnEnded = false;\r\n        },\r\n        onEnd: (G, ctx) => {\r\n            if (!G.turnEnded) {\r\n                G.lastDrawType = [];\r\n                //numDraws should be set from end of last turn\r\n                //(we set it at the end for meteorologist to be able to decrement it during turn)\r\n                for (var draw = 0; draw < G.numDraws; draw++) {\r\n                    var val = ctx.random.Die(100);\r\n                    if (val <= (G.stormPicksUpProb) || val <= (G.sunBeatsDownProb)) {\r\n                        var bothQualify = false;\r\n                        var doStormPicksUp = false;\r\n                        //if both qualify...\r\n                        if (val <= Math.min((G.stormPicksuPProb), (G.sunBeatsDownProb))) {\r\n                            bothQualify = true;\r\n                            //...prioritize the one with higher probability.\r\n                            if ((G.stormPicksUpProb) > (G.sunBeatsDownProb)) {\r\n                                doStormPicksUp = true;\r\n                            }\r\n                        }\r\n                        if ((!bothQualify && val <= (G.stormPicksUpProb)) || (bothQualify && doStormPicksUp)) {\r\n                            G.stormLevel += 1;\r\n                            G.lastDrawType.push(\"Storm Picks Up\");\r\n                            //reset stormPicksUp probability\r\n                            G.stormPicksUpProb = 1;\r\n                            //increment sunBeatsDown\r\n                            G.sunBeatsDownProb += 2;\r\n                        }\r\n                        else {\r\n                            for (var i = 0; i < G.players.length; i++) {\r\n                                if (!(G.tiles[G.players[i].position].type === \"tunnel\" && G.tiles[G.players[i].position].isRevealed)) {\r\n                                    G.players[i].water -= 1;\r\n                                }\r\n                            }\r\n                            G.lastDrawType.push(\"Sun Beats Down\");\r\n                            //reset sunBeatsDown\r\n                            G.sunBeatsDownProb = 1;\r\n                            //increment stormPicksUp\r\n                            G.stormPicksUpProb += 1;\r\n                        }\r\n                    }\r\n                    else {\r\n                        //increment both\r\n                        G.stormPicksUpProb += 1;\r\n                        G.sunBeatsDownProb += 2;\r\n\r\n                        var stormPos = 0;\r\n                        for (stormPos; stormPos < G.tiles.length; stormPos++) {\r\n                            if (G.tiles[stormPos].type === \"storm\") {\r\n                                break;\r\n                            }\r\n                        }\r\n                        //1 = up, 2 = left, 3 = down, 4 = right\r\n                        var windDirection = ctx.random.Die(4);\r\n                        //1-3 = 1, 4-5 = 2, 6 = 3\r\n                        var windStrength = ctx.random.Die(6);\r\n                        var maxTilesAffected;\r\n                        if (windStrength <= 3) {\r\n                            maxTilesAffected = 1;\r\n                        }\r\n                        else if (windStrength <= 5) {\r\n                            maxTilesAffected = 2;\r\n                        }\r\n                        else {\r\n                            maxTilesAffected = 3;\r\n                        }\r\n                        //identify positions of tiles that are moved\r\n                        var affectedPos = [];\r\n                        var candidatePos = stormPos;\r\n                        if (windDirection === 1) {\r\n                            while (affectedPos.length < maxTilesAffected) {\r\n                                candidatePos += 5;\r\n                                if (candidatePos >= 0 && candidatePos <= 24) {\r\n                                    affectedPos.push(candidatePos);\r\n                                }\r\n                                else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        else if (windDirection === 2) {\r\n                            while (affectedPos.length < maxTilesAffected) {\r\n                                candidatePos += 1;\r\n                                //check whether on the same row\r\n                                if (candidatePos >= 0 && candidatePos <= 24 &&\r\n                                    Math.floor(candidatePos / 5) === Math.floor(stormPos / 5)) {\r\n                                    affectedPos.push(candidatePos);\r\n                                }\r\n                                else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        else if (windDirection === 3) {\r\n                            while (affectedPos.length < maxTilesAffected) {\r\n                                candidatePos -= 5;\r\n                                if (candidatePos >= 0 && candidatePos <= 24) {\r\n                                    affectedPos.push(candidatePos);\r\n                                }\r\n                                else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        else if (windDirection === 4) {\r\n                            while (affectedPos.length < maxTilesAffected) {\r\n                                candidatePos -= 1;\r\n                                //check whether on the same row\r\n                                if (candidatePos >= 0 && candidatePos <= 24 &&\r\n                                    Math.floor(candidatePos / 5) === Math.floor(stormPos / 5)) {\r\n                                    affectedPos.push(candidatePos);\r\n                                }\r\n                                else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        //add 1 sand to affected tiles\r\n                        for (var i = 0; i < affectedPos.length; i++) {\r\n                            G.tiles[affectedPos[i]].sandCount += 1;\r\n                        }\r\n\r\n                        //execute movements\r\n                        const tempStormTile = G.tiles[stormPos];\r\n                        var prevPos = stormPos;\r\n                        //edge case: first give all of stormPos's finalParts to the first affectedPos tile\r\n                        if (affectedPos.length > 0) {\r\n                            for (var i = 0; i < G.tiles[stormPos].finalParts.length; i++) {\r\n                                G.tiles[affectedPos[0]].finalParts.push(G.tiles[stormPos].finalParts[i]);\r\n                            }\r\n                            //clear storm's finalParts\r\n                            G.tiles[stormPos].finalParts = [];\r\n                        }\r\n                        //...now execute\r\n                        for (var i = 0; i < affectedPos.length; i++) {\r\n                            G.tiles[prevPos] = G.tiles[affectedPos[i]];\r\n                            prevPos = affectedPos[i];\r\n                        }\r\n                        if (affectedPos.length !== 0) {\r\n                            G.tiles[affectedPos[affectedPos.length - 1]] = tempStormTile;\r\n                        }\r\n\r\n                        //move all affected players\r\n                        var affectedPlayers = [];\r\n                        for (var i = 0; i < G.players.length; i++) {\r\n                            for (var j = 0; j < affectedPos.length; j++) {\r\n                                if (G.players[i].position === affectedPos[j]) {\r\n                                    affectedPlayers.push(i);\r\n                                }\r\n                            }\r\n                        }\r\n                        for (var i = 0; i < affectedPlayers.length; i++) {\r\n                            if (windDirection === 1) {\r\n                                G.players[affectedPlayers[i]].position -= 5;\r\n                            }\r\n                            else if (windDirection === 2) {\r\n                                G.players[affectedPlayers[i]].position -= 1;\r\n                            }\r\n                            else if (windDirection === 3) {\r\n                                G.players[affectedPlayers[i]].position += 5;\r\n                            }\r\n                            else if (windDirection === 4) {\r\n                                G.players[affectedPlayers[i]].position += 1;\r\n                            }\r\n                        }\r\n\r\n                        var directionString;\r\n                        if (windDirection === 1) {\r\n                            directionString = \"up\";\r\n                        }\r\n                        else if (windDirection === 2) {\r\n                            directionString = \"left\";\r\n                        }\r\n                        else if (windDirection === 3) {\r\n                            directionString = \"down\";\r\n                        }\r\n                        else if (windDirection === 4) {\r\n                            directionString = \"right\";\r\n                        }\r\n                        G.lastDrawType.push(\"Wind: \" + directionString + \", strength \" + maxTilesAffected);\r\n                    }\r\n                }\r\n                //check storm level + ctx.numPlayers, and draw according to that\r\n                if (G.stormLevel === 0) {\r\n                    G.numDraws = 2;\r\n                }\r\n                else if (ctx.numPlayers === 2) {\r\n                    if (G.stormLevel <= 3) {\r\n                        G.numDraws = 3;\r\n                    }\r\n                    else if (G.stormLevel <= 7) {\r\n                        G.numDraws = 4;\r\n                    }\r\n                    else if (G.stormLevel <= 10) {\r\n                        G.numDraws = 5;\r\n                    }\r\n                    else {\r\n                        G.numDraws = 6;\r\n                    }\r\n                }\r\n                else if (ctx.numPlayers === 3 || ctx.numPlayers === 4) {\r\n                    if (G.stormLevel <= 4) {\r\n                        G.numDraws = 3;\r\n                    }\r\n                    else if (G.stormLevel <= 8) {\r\n                        G.numDraws = 4;\r\n                    }\r\n                    else if (G.stormLevel <= 11) {\r\n                        G.numDraws = 5;\r\n                    }\r\n                    else {\r\n                        G.numDraws = 6;\r\n                    }\r\n                }\r\n                else if (ctx.numPlayers === 5) {\r\n                    if (G.stormLevel <= 5) {\r\n                        G.numDraws = 3;\r\n                    }\r\n                    else if (G.stormLevel <= 9) {\r\n                        G.numDraws = 4;\r\n                    }\r\n                    else if (G.stormLevel <= 12) {\r\n                        G.numDraws = 5;\r\n                    }\r\n                    else {\r\n                        G.numDraws = 6;\r\n                    }\r\n                }\r\n                G.turnEnded = true;\r\n            }\r\n        }\r\n    },\r\n\r\n    endIf: (G, ctx) => {\r\n        for (var i = 0; i < G.players.length; i++) {\r\n            if (G.players[i].water < 0) {\r\n                return true;\r\n            }\r\n        }\r\n        if ((ctx.numPlayers === 2 && G.stormLevel === 13) ||\r\n            ((ctx.numPlayers === 3 || ctx.numPlayers === 4) && G.stormLevel === 14) ||\r\n            (ctx.numPlayers === 5 && G.stormLevel === 15)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n};\r\n\r\nvar setupPlayers = (numPlayers) => {\r\n    var players = [];\r\n    var pos = getRandomInt(25);\r\n    while (pos === 12) {\r\n        pos = getRandomInt(25);\r\n    }\r\n    for (var i = 0; i < numPlayers; i++) {\r\n        players.push({\r\n            role: \"\",\r\n            position: pos,\r\n            water: 0,\r\n            maxWater: 0,\r\n        });\r\n    }\r\n    return players;\r\n}\r\n\r\nfunction getRandomInt(max) {\r\n    return Math.floor(Math.random() * max);\r\n}\r\n\r\nvar setupTiles = () => {\r\n    var tiles = [];\r\n    for (var i = 0; i < 2; i++) {\r\n        tiles.push({\r\n            isRevealed: false,\r\n            sandCount: 0,\r\n            type: \"well\",\r\n            finalParts: []\r\n        });\r\n    }\r\n    tiles.push({\r\n        isRevealed: false,\r\n        sandCount: 0,\r\n        type: \"mirage\",\r\n        finalParts: []\r\n    });\r\n    for (var i = 0; i < 9; i++) {\r\n        tiles.push({\r\n            isRevealed: false,\r\n            sandCount: 0,\r\n            type: \"gear\",\r\n            finalParts: []\r\n        });\r\n    }\r\n    for (var i = 0; i < 3; i++) {\r\n        tiles.push({\r\n            isRevealed: false,\r\n            sandCount: 0,\r\n            type: \"tunnel\",\r\n            finalParts: []\r\n        })\r\n    }\r\n    for (var i = 0; i < 4; i++) {\r\n        for (var j = 0; j < 2; j++) {\r\n            //parts: A, B, C, D\r\n            //pos: 0 --> vertical, 1 --> horizontal\r\n            var part;\r\n            var pos;\r\n            if (i === 0) part = \"A\";\r\n            else if (i === 1) part = \"B\";\r\n            else if (i === 2) part = \"C\";\r\n            else if (i === 3) part = \"D\";\r\n            if (j === 0) pos = \"h\";\r\n            else if (j === 1) pos = \"v\"\r\n            tiles.push({\r\n                isRevealed: false,\r\n                sandCount: 0,\r\n                type: \"clue\",\r\n                part: part,\r\n                pos: pos,\r\n                finalParts: []\r\n            });\r\n        }\r\n    }\r\n    tiles.push({\r\n        isRevealed: false,\r\n        sandCount: 0,\r\n        type: \"launchpad\",\r\n        finalParts: []\r\n    })\r\n    shuffle(tiles);\r\n    tiles.splice(12, 0, {\r\n        isRevealed: false,\r\n        sandCount: 0,\r\n        type: \"storm\",\r\n        finalParts: []\r\n    });\r\n\r\n    //setup sand\r\n    const sandTiles = [2, 6, 8, 10, 14, 16, 18, 22];\r\n    for (var i = 0; i < sandTiles.length; i++) {\r\n        tiles[sandTiles[i]].sandCount = 1;\r\n    }\r\n    return tiles;\r\n}\r\n\r\n//https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array lol sorry :(\r\nfunction shuffle(array) {\r\n    var currentIndex = array.length, randomIndex;\r\n\r\n    // While there remain elements to shuffle...\r\n    while (0 !== currentIndex) {\r\n\r\n        // Pick a remaining element...\r\n        randomIndex = Math.floor(Math.random() * currentIndex);\r\n        currentIndex--;\r\n\r\n        // And swap it with the current element.\r\n        [array[currentIndex], array[randomIndex]] = [\r\n            array[randomIndex], array[currentIndex]];\r\n    }\r\n\r\n    return array;\r\n}","import React from 'react';\r\nimport './board.css'\r\n\r\nexport class ForbiddenDesertBoard extends React.Component {\r\n    state = {\r\n        assignID: 0,\r\n        assignDifficulty: false,\r\n        digging: false,\r\n        givingWater: false,\r\n        excavateErrorMsg: '',\r\n        waterErrorMsg: '',\r\n        mitigateErrorMsg: '',\r\n    }\r\n\r\n    assignRoleTo(id, role) {\r\n        this.props.moves.setPlayerInfo(id, role);\r\n        this.setState({ assignID: this.state.assignID + 1 });\r\n    }\r\n    assignDifficultyTo(diff) {\r\n        this.props.moves.setDifficulty(diff);\r\n        this.setState({ assignDifficulty: true })\r\n    }\r\n    //move, or dig if this.state.digging\r\n    onClickTile(id) {\r\n        if (this.isBuried()) {\r\n            //you can only dig when buried\r\n            if (this.isSameTile(id) && this.state.digging && this.props.G.tiles[id].sandCount > 0) {\r\n                this.props.moves.dig(id);\r\n                this.setState({ digging: false });\r\n            }\r\n        }\r\n        else if (this.isAdjacentTile(id) || this.isSameTile(id) ||\r\n            (this.isDiagonalTile(id) && this.props.G.players[this.props.ctx.currentPlayer].role === \"Explorer\")) {\r\n            if (this.state.digging && this.props.G.tiles[id].sandCount > 0) {\r\n                this.props.moves.dig(id);\r\n                this.setState({ digging: false });\r\n            }\r\n            else if (!this.isSameTile(id) &&\r\n                (this.props.G.tiles[id].sandCount < 2 || this.props.G.players[this.props.ctx.currentPlayer].role === \"Climber\")\r\n                && !this.state.digging) {\r\n                this.props.moves.move(id);\r\n            }\r\n        }\r\n        //move through tunnel\r\n        else if (this.props.G.tiles[id].type === \"tunnel\" && this.props.G.tiles[id].isRevealed &&\r\n            this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].type === \"tunnel\" &&\r\n            this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].isRevealed &&\r\n            this.props.G.tiles[id].sandCount < 2 && !this.state.digging) {\r\n            this.props.moves.move(id);\r\n        }\r\n    }\r\n    excavate() {\r\n        this.props.moves.excavate();\r\n    }\r\n    giveWaterTo(id) {\r\n        this.props.moves.giveWater(id);\r\n        this.setState({ givingWater: false });\r\n    }\r\n    pickUpFinalPart() {\r\n        //no need to check condition; button won't show up if it's not met\r\n        this.props.moves.pickUpFinalPart();\r\n    }\r\n    mitigate() {\r\n        if (this.props.G.numDraws > 0) {\r\n            this.props.moves.mitigate();\r\n        }\r\n        else {\r\n            this.setState({ mitigateErrorMsg: \"All storm cards already mitigated!\" })\r\n            setTimeout(() => this.setState({ mitigateErrorMsg: '' }), 3000);\r\n        }\r\n    }\r\n    collectWater() {\r\n        this.props.moves.collectWater();\r\n    }\r\n    isAdjacentTile(id) {\r\n        const currentPlayerPos = this.props.G.players[this.props.ctx.currentPlayer].position;\r\n        var check1 = id >= 0 && id <= 24 &&\r\n            (id === currentPlayerPos - 1 || id === currentPlayerPos + 1 ||\r\n                id === currentPlayerPos - 5 || id === currentPlayerPos + 5);\r\n        if (id === currentPlayerPos - 1 || id === currentPlayerPos + 1) {\r\n            //check2 is to prevent moving across the entire board, e.g. between 4-5, 9-10, etc.\r\n            var check2 = (Math.floor(id / 5) === Math.floor(currentPlayerPos / 5));\r\n            return check2;\r\n        }\r\n        else {\r\n            return check1;\r\n        }\r\n    }\r\n    isSameTile(id) {\r\n        return (id === this.props.G.players[this.props.ctx.currentPlayer].position);\r\n    }\r\n    isDiagonalTile(id) {\r\n        const currentPlayerPos = this.props.G.players[this.props.ctx.currentPlayer].position;\r\n        var check1 = id >= 0 && id <= 24 &&\r\n            (id === currentPlayerPos - 6 || id === currentPlayerPos - 4 ||\r\n                id === currentPlayerPos + 4 || id === currentPlayerPos + 6);\r\n        //check2 is to make sure id is exactly one row away from the current tile\r\n        var check2 = Math.abs(Math.floor(id / 5) - Math.floor(currentPlayerPos / 5)) === 1;\r\n        return check1 && check2;\r\n    }\r\n\r\n    //for idToStateClass purposes, not onClickTile\r\n    tileIsMovable(id) {\r\n        if (this.isBuried()) {\r\n            return false;\r\n        }\r\n        else {\r\n            return (this.isAdjacentTile(id)\r\n                || (this.props.G.players[this.props.ctx.currentPlayer].role === \"Explorer\" && this.isDiagonalTile(id))\r\n                || (this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].type === \"tunnel\"\r\n                    && this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].isRevealed\r\n                    && this.props.G.tiles[id].type === \"tunnel\" && this.props.G.tiles[id].isRevealed))\r\n                && !this.isSameTile(id)\r\n                && (this.props.G.tiles[id].sandCount < 2 || this.props.G.players[this.props.ctx.currentPlayer].role === \"Climber\")\r\n                && !this.state.digging && !this.isBuried();\r\n        }\r\n    }\r\n    //for idToStateClass purposes, not onClickTile\r\n    tileIsDiggable(id) {\r\n        if (this.isBuried()) {\r\n            return this.isSameTile(id) && this.state.digging && this.props.G.tiles[id].sandCount > 0;\r\n            //last condition here should always be true lol\r\n        }\r\n        else {\r\n            return (this.isAdjacentTile(id) || this.isSameTile(id)\r\n                || (this.props.G.players[this.props.ctx.currentPlayer].role === \"Explorer\" && this.isDiagonalTile(id)))\r\n                && (this.state.digging && this.props.G.tiles[id].sandCount > 0);\r\n        }\r\n    }\r\n    //returns whether current player is buried\r\n    isBuried() {\r\n        //check if current tile has a climber on it;\r\n        //iterate through all players, and check if a climber's position is current position\r\n        const currPos = this.props.G.players[this.props.ctx.currentPlayer].position;\r\n        for (var i = 0; i < this.props.G.players.length; i++) {\r\n            if (this.props.G.players[i].role === \"Climber\" && this.props.G.players[i].position === currPos) {\r\n                return false;\r\n            }\r\n        }\r\n        return this.props.G.tiles[currPos].sandCount > 1;\r\n    }\r\n\r\n    render() {\r\n        //role selection screen\r\n        if (this.state.assignID < this.props.ctx.numPlayers) {\r\n            return (\r\n                <div className=\"center\">\r\n                    <div id=\"title\">\r\n                        Role Selection\r\n                    </div>\r\n                    <div className=\"header\">\r\n                        Choose role for Player {this.state.assignID}:\r\n                    </div>\r\n                    <p></p>\r\n                    <div>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Archeologist\"); }}>\r\n                            Archeologist\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Climber\"); }}>\r\n                            Climber\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Explorer\"); }}>\r\n                            Explorer\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Meteorologist\"); }}>\r\n                            Meteorologist\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Navigator\"); }}>\r\n                            Navigator\r\n                        </button>\r\n                        <button onClick={() => { this.assignRoleTo(this.state.assignID, \"Water Carrier\"); }}>\r\n                            Water Carrier\r\n                        </button>\r\n                    </div>\r\n                    <p></p>\r\n                    <div>\r\n                        <div>\r\n                            <p id=\"header\">Archeologist (🍼3)</p>\r\n                            <ul>\r\n                                <li>Removes 2 sand when digging instead of 1.</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Climber (🍼3)</p>\r\n                            <ul>\r\n                                <li>Carry: moves other players along with Climber. (Cost: free)</li>\r\n                                <li>Can move over tiles with 2 or more sand.</li>\r\n                                <li>Allows all players on Climber's current tile to leave even with 2 or more sand.</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Explorer (🍼4)</p>\r\n                            <ul>\r\n                                <li>Can move, dig, and use items diagonally.</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Meteorologist (🍼4)</p>\r\n                            <ul>\r\n                                <li>Mitigate: draw 1 less Storm at the end of the turn. (Cost: 1 action)</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Navigator (🍼4)</p>\r\n                            <ul>\r\n                                <li>Navigate: move another player up to 3 tiles. Climber and Explorer keep their abilities. (Cost: 1 action)</li>\r\n                            </ul>\r\n                        </div>\r\n                        <div>\r\n                            <p id=\"header\">Water Carrier (🍼5)</p>\r\n                            <ul>\r\n                                <li>Collect Water: take 2 water from an excavated well. (Cost: 1 action)</li>\r\n                                <li>Can give water to adjacent players (for free).</li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n        //difficulty selection screen\r\n        if (this.state.assignDifficulty === false) {\r\n            return (\r\n                <div className=\"center\">\r\n                    <div id=\"title\">\r\n                        Difficulty Selection\r\n                    </div>\r\n                    <p></p>\r\n                    <div>\r\n                        <button onClick={() => { this.assignDifficultyTo(0); }}>\r\n                            Novice\r\n                        </button>\r\n                        <button onClick={() => { this.assignDifficultyTo(1); }}>\r\n                            Normal\r\n                        </button>\r\n                        <button onClick={() => { this.assignDifficultyTo(2); }}>\r\n                            Elite\r\n                        </button>\r\n                        <button onClick={() => { this.assignDifficultyTo(3); }}>\r\n                            Legendary\r\n                        </button>\r\n                    </div>\r\n                    <p></p>\r\n                    <div>\r\n                        (Difficulty sets the starting storm level.)\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        //adds class to render borders on appropriate tiles when this.state.digging\r\n        //or when moving (!this.state.digging)\r\n        let idToStateClass =\r\n            new Array(25).fill(\" \")\r\n                .map((currentClass, tileID, _) => {\r\n                    if (this.state.digging && this.tileIsDiggable(tileID)) {\r\n                        return `${currentClass} diggable` // Add the `diggable` class to this\r\n                    } else {\r\n                        return `${currentClass}`; // Do not add any more classes\r\n                    }\r\n                }) // You can chain additional `map` function calls if you need to add more classes to a tile based on the current state of your program\r\n                .map((currentClass, tileID, _) => {\r\n                    if (!this.state.digging && this.tileIsMovable(tileID)) {\r\n                        return `${currentClass} movable`\r\n                    } else {\r\n                        return `${currentClass}`;\r\n                    }\r\n                }) // May be problematic if you somehow add multiple classes that have conflicting properties\r\n\r\n        var tiles = [];\r\n        for (var i = 0; i < 5; i++) {\r\n            var row = [];\r\n            for (var j = 0; j < 5; j++) {\r\n                var tile = [];\r\n                const id = 5 * i + j;\r\n                if (this.props.G.tiles[id].type === \"storm\") {\r\n                    //render finalParts if it has at least one\r\n                    if (this.props.G.tiles[id].finalParts.length > 0) {\r\n                        tile.push(<div className=\"final-part\">Parts: {this.props.G.tiles[id].finalParts}</div>)\r\n                    }\r\n                    row.push(<td className=\"storm\">{tile}</td>);\r\n                }\r\n                else {\r\n                    var playersOnThisTile = [];\r\n                    //render players on current tile\r\n                    for (var k = 0; k < this.props.G.players.length; k++) {\r\n                        if (this.props.G.players[k].position === id) {\r\n                            playersOnThisTile.push(k);\r\n                        }\r\n                    }\r\n                    tile.push(<div className=\"player\">{playersOnThisTile}</div>);\r\n                    //render sandCount\r\n                    if (this.props.G.tiles[id].sandCount !== 0) {\r\n                        var sandIndicator = \"\";\r\n                        for (var l = 0; l < this.props.G.tiles[id].sandCount; l++) {\r\n                            sandIndicator = sandIndicator.concat(\"l\");\r\n                        }\r\n                        tile.push(<div className={this.props.G.tiles[id].sandCount > 1 ? \"sand red\" : \"sand\"}>\r\n                            {sandIndicator}</div>);\r\n                    }\r\n                    //render finalParts if it has at least one\r\n                    if (this.props.G.tiles[id].finalParts.length > 0) {\r\n                        tile.push(<div className=\"final-part\">Parts: {this.props.G.tiles[id].finalParts}</div>)\r\n                    }\r\n                    //render unrevealed backgrounds (set by className CSS)\r\n                    if (this.props.G.tiles[id].isRevealed === false) {\r\n                        row.push(<td key={id} className={(this.props.G.tiles[id].type === \"well\" || this.props.G.tiles[id].type === \"mirage\" ?\r\n                            \"unrevealed-water\" : \"unrevealed\") + idToStateClass[id]} onClick={() => this.onClickTile(id)}>{tile}</td>);\r\n                    }\r\n                    //render clue tile (assign the right className)\r\n                    else if (this.props.G.tiles[id].type === \"clue\") {\r\n                        const className = this.props.G.tiles[id].part + this.props.G.tiles[id].pos + idToStateClass[id];\r\n                        row.push(<td key={id} className={className + idToStateClass[id]}\r\n                            onClick={() => this.onClickTile(id)}>{tile}</td>);\r\n                    }\r\n                    else {\r\n                        row.push(<td key={id} className={this.props.G.tiles[id].type + idToStateClass[id]}\r\n                            onClick={() => this.onClickTile(id)}>{tile}</td>);\r\n                    }\r\n                }\r\n            }\r\n            tiles.push(<tr key={i}>{row}</tr>);\r\n        }\r\n\r\n        var actionButtons = [];\r\n        if (this.isBuried()) {\r\n            actionButtons.push(\r\n                <div>\r\n                    You are buried!\r\n                </div>\r\n            )\r\n        }\r\n        actionButtons.push(\r\n            <div>\r\n                <div>\r\n                    {this.state.digging ? \"Choose a tile to dig.\" : \"\"}\r\n                </div>\r\n                <button onClick={() => { this.setState({ digging: !this.state.digging }); }}>\r\n                    Dig\r\n                </button>\r\n                <button onClick={() => {\r\n                    if (this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].isRevealed === true) {\r\n                        this.setState({ excavateErrorMsg: \"This tile is already revealed!\" })\r\n                        setTimeout(() => this.setState({ excavateErrorMsg: '' }), 3000);\r\n                    }\r\n                    else if (this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].sandCount !== 0) {\r\n                        this.setState({ excavateErrorMsg: \"Remove all sand on this tile before excavating!\" })\r\n                        setTimeout(() => this.setState({ excavateErrorMsg: '' }), 3000);\r\n                    }\r\n                    else {\r\n                        this.excavate();\r\n                    }\r\n                }}>\r\n                    Excavate\r\n                </button>\r\n            </div>\r\n        );\r\n        actionButtons.push(\r\n            <div>\r\n                {this.state.excavateErrorMsg}\r\n            </div>\r\n        )\r\n        actionButtons.push(\r\n            <button onClick={() => { this.setState({ givingWater: !this.state.givingWater }); }}>\r\n                Give water to:\r\n            </button>\r\n        );\r\n        //give water to popup buttons\r\n        if (this.state.givingWater) {\r\n            var someoneFound = false;\r\n            for (var i = 0; i < this.props.G.players.length; i++) {\r\n                //this took me hours to fix.. if you don't assign i to a constant,\r\n                //and use i for giveWaterTo parameter, then the value is going \r\n                //to be, like, different every time you call it. or something.\r\n                const index = i;\r\n                var errorMsg = '';\r\n                if (index != this.props.ctx.currentPlayer\r\n                    && (this.isSameTile(this.props.G.players[index].position)\r\n                        || (this.props.G.players[this.props.ctx.currentPlayer].role === \"Water Carrier\" &&\r\n                            this.isAdjacentTile(this.props.G.players[index].position)))) {\r\n                    actionButtons.push(\r\n                        <button onClick={() => {\r\n                            if (this.props.G.players[this.props.ctx.currentPlayer].water === 0) {\r\n                                this.setState({ givingWater: false, waterErrorMsg: \"You don't have enough water!\" });\r\n                                setTimeout(() => this.setState({ waterErrorMsg: '' }), 3000);\r\n                            }\r\n                            else if (this.props.G.players[index].water === this.props.G.players[index].maxWater) {\r\n                                this.setState({ givingWater: false, waterErrorMsg: \"Target has full water!\" });\r\n                                setTimeout(() => this.setState({ waterErrorMsg: '' }), 3000);\r\n                            }\r\n                            else {\r\n                                this.giveWaterTo(index);\r\n                            }\r\n                        }}>\r\n                            Player {index}\r\n                        </button>\r\n                    );\r\n                    someoneFound = true;\r\n                }\r\n            }\r\n            if (!someoneFound) {\r\n                if (this.props.G.players[this.props.ctx.currentPlayer].role === \"Water Carrier\") {\r\n                    this.setState({ givingWater: false, waterErrorMsg: \"No players to give water to! (They must be on the same or an adjacent tile.)\" });\r\n                }\r\n                else {\r\n                    this.setState({ givingWater: false, waterErrorMsg: \"No players to give water to! (They must be on the same tile.)\" });\r\n                }\r\n                setTimeout(() => this.setState({ waterErrorMsg: '' }), 3000);\r\n            }\r\n        }\r\n        actionButtons.push(\r\n            <div>\r\n                {this.state.waterErrorMsg}\r\n            </div>\r\n        )\r\n        //Mitigate for meteorologist only\r\n        if (this.props.G.players[this.props.ctx.currentPlayer].role === \"Meteorologist\") {\r\n            actionButtons.push(\r\n                <button onClick={() => { this.mitigate(); }}>\r\n                    Mitigate\r\n                </button>\r\n            )\r\n        }\r\n        actionButtons.push(\r\n            <div>\r\n                {this.state.mitigateErrorMsg}\r\n            </div>\r\n        )\r\n        //collectWater for water carrier only\r\n        if (this.props.G.players[this.props.ctx.currentPlayer].role === \"Water Carrier\"\r\n            && this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].type === \"well\"\r\n            && this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].isRevealed\r\n            && this.props.G.players[this.props.ctx.currentPlayer].water < this.props.G.players[this.props.ctx.currentPlayer].maxWater) {\r\n            actionButtons.push(\r\n                <button onClick={() => { this.collectWater(); }}>\r\n                    Collect water\r\n                </button>\r\n            )\r\n        }\r\n        //only show pickup part button when the tile of the current player position\r\n        //has at least 1 finalPart, and the tile is revealed\r\n        if (this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].isRevealed &&\r\n            this.props.G.tiles[this.props.G.players[this.props.ctx.currentPlayer].position].finalParts.length > 0) {\r\n            actionButtons.push(\r\n                <button onClick={() => { this.pickUpFinalPart(); }}>\r\n                    Pick up part\r\n                </button>\r\n            )\r\n        }\r\n        actionButtons.push(\r\n            <div>\r\n                <button onClick={() => { this.props.undo(); }}>\r\n                    Undo\r\n                </button>\r\n                <button onClick={() => { this.props.moves.doNothing(); }}>\r\n                    Do nothing\r\n                </button>\r\n            </div>\r\n        )\r\n\r\n        var rightbar = [];\r\n        //player info\r\n        rightbar.push(<div>Players:</div>)\r\n        var playerInfoList = [];\r\n        for (var i = 0; i < this.props.ctx.numPlayers; i++) {\r\n            playerInfoList.push(\r\n                <div>\r\n                    {i} - {this.props.G.players[i].role} 🍼 {this.props.G.players[i].water} / {this.props.G.players[i].maxWater}\r\n                </div>\r\n            );\r\n        }\r\n        rightbar.push(playerInfoList);\r\n\r\n        rightbar.push(\r\n            <div>\r\n                <p></p>\r\n                <div>Current storm level: {this.props.G.stormLevel}</div>\r\n                <p></p>\r\n            </div>\r\n        );\r\n\r\n        //storm deck last turn\r\n        rightbar.push(\r\n            <div>\r\n                <p></p>\r\n                End of last turn:\r\n            </div>\r\n        );\r\n        for (var i = 0; i < this.props.G.lastDrawType.length; i++) {\r\n            rightbar.push(\r\n                <div>\r\n                    {this.props.G.lastDrawType[i]}\r\n                </div>\r\n            );\r\n        }\r\n        //probabilities\r\n        rightbar.push(\r\n            <div>\r\n                <p></p>\r\n                <div>\r\n                    Chance of Sun Beats Down at end of turn:&nbsp;\r\n                    {((1 - (1 - this.props.G.sunBeatsDownProb / 100) ** (this.props.G.numDraws)) * 100).toFixed(2)}%\r\n                </div>\r\n                <div>\r\n                    Chance of Storm Picks Up at end of turn:&nbsp;\r\n                    {((1 - (1 - this.props.G.stormPicksUpProb / 100) ** (this.props.G.numDraws)) * 100).toFixed(2)}%\r\n                </div>\r\n            </div>\r\n        );\r\n        //currently collected parts\r\n        var partList = [];\r\n        for (var i = 0; i < this.props.G.collectedParts.length; i++) {\r\n            var color;\r\n            if (this.props.G.collectedParts[i] === \"A\") {\r\n                color = \"red\";\r\n            }\r\n            else if (this.props.G.collectedParts[i] === \"B\") {\r\n                color = \"green\";\r\n            }\r\n            else if (this.props.G.collectedParts[i] === \"C\") {\r\n                color = \"blue\";\r\n            }\r\n            else if (this.props.G.collectedParts[i] === \"D\") {\r\n                color = \"purple\";\r\n            }\r\n            partList.push(\r\n                <div className={color}>\r\n                    {this.props.G.collectedParts[i]}\r\n                </div>\r\n            );\r\n        }\r\n        if (this.props.G.collectedParts.length === 0) {\r\n            rightbar.push(\r\n                <div>\r\n                    <p></p>\r\n                    Collected parts (4 total): none\r\n                </div>\r\n            );\r\n        }\r\n        else {\r\n            rightbar.push(\r\n                <div>\r\n                    <p></p>\r\n                    Collected parts (4 total): {partList}\r\n                </div>\r\n            );\r\n        }\r\n\r\n        var draw3, draw4, draw5, draw6, death;\r\n        if (this.props.ctx.numPlayers === 2) {\r\n            draw3 = \"1 - 3\";\r\n            draw4 = \"4 - 7\";\r\n            draw5 = \"8 - 10\";\r\n            draw6 = \"11 - 12\";\r\n            death = \"13\";\r\n        }\r\n        else if (this.props.ctx.numPlayers === 3 || this.props.ctx.numPlayers === 4) {\r\n            draw3 = \"1 - 4\";\r\n            draw4 = \"5 - 8\";\r\n            draw5 = \"9 - 11\";\r\n            draw6 = \"12 - 13\";\r\n            death = \"14\";\r\n        }\r\n        else if (this.props.ctx.numPlayers === 5) {\r\n            draw3 = \"1 - 5\";\r\n            draw4 = \"6 - 9\";\r\n            draw5 = \"10 - 12\";\r\n            draw6 = \"13 - 14\";\r\n            death = \"15\";\r\n        }\r\n        rightbar.push(\r\n            <div className=\"small\">\r\n                <p></p>\r\n                <div>\r\n                    Draw 2 at storm level 0\r\n                </div>\r\n                <div>\r\n                    Draw 3 at levels {draw3}\r\n                </div>\r\n                <div>\r\n                    Draw 4 at levels {draw4}\r\n                </div>\r\n                <div>\r\n                    Draw 5 at levels {draw5}\r\n                </div>\r\n                <div>\r\n                    Draw 6 at levels {draw6}\r\n                </div>\r\n                <div>\r\n                    Game over at level {death}\r\n                </div>\r\n                <p></p>\r\n                <div>\r\n                    Archeologist: removes 2 sand when digging\r\n                </div>\r\n                <div>\r\n                    Climber: move over any tile; allows everyone on current tile to move. Ability: Carry (free)\r\n                </div>\r\n                <div>\r\n                    Explorer: move, dig, and use items diagonally\r\n                </div>\r\n                <div>\r\n                    Meteorologist: Ability: Mitigate (cost: 1 action)\r\n                </div>\r\n                <div>\r\n                    Navigator: Ability: Navigate (cost: 1 action)\r\n                </div>\r\n                <div>\r\n                    Water Carrier: give water to adjacent players. Ability: Collect 2 Water from well (free)\r\n                </div>\r\n            </div>\r\n        )\r\n\r\n        return (\r\n            <div>\r\n                <div className=\"fl\">\r\n                    <div className=\"header center\">\r\n                        <div>\r\n                            Player {this.props.ctx.currentPlayer}'s turn\r\n                        </div>\r\n                        <div>\r\n                            Actions left in turn: {4 - this.props.ctx.numMoves}\r\n                        </div>\r\n                    </div>\r\n                    <table>\r\n                        <tbody>{tiles}</tbody>\r\n                    </table>\r\n                    <div className=\"center\">\r\n                        {actionButtons}\r\n                    </div>\r\n                </div>\r\n                <div className=\"fl\">\r\n                    {rightbar}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport { Client } from 'boardgame.io/react';\r\nimport { ForbiddenDesert } from './Game';\r\nimport { ForbiddenDesertBoard } from './board';\r\nimport './App.css';\r\n\r\nclass App extends React.Component {\r\n  state = { numPlayers: null };\r\n\r\n  render() {\r\n    if (this.state.numPlayers === null) {\r\n      return (\r\n        <div className=\"center\">\r\n          <div>\r\n            !! THIS IS A WORK IN PROGRESS !!\r\n          </div>\r\n          <div id=\"title\">\r\n            FORBIDDEN DESERT\r\n          </div>\r\n          <div>\r\n            Based off the original game designed by Gamewright.\r\n          </div>\r\n          <div>\r\n            <a href=\"https://www.gamewright.com/gamewright/pdfs/Rules/ForbiddenDesertTM-RULES.pdf\">Official rules manual</a>\r\n          </div>\r\n          <div>\r\n            <a href=\"https://boardgamegeek.com/boardgame/136063/forbidden-desert\">BoardGameGeek listing</a>\r\n          </div>\r\n          <div>\r\n            <a href=\"https://github.com/hwabis/forbidden-desert\">Source code</a>\r\n          </div>\r\n          <div id=\"header\">\r\n            <p>Select number of players:</p>\r\n            <button onClick={() => this.setState({ numPlayers: 2 })}>\r\n              2\r\n            </button>\r\n            <button onClick={() => this.setState({ numPlayers: 3 })}>\r\n              3\r\n            </button>\r\n            <button onClick={() => this.setState({ numPlayers: 4 })}>\r\n              4\r\n            </button>\r\n            <button onClick={() => this.setState({ numPlayers: 5 })}>\r\n              5\r\n            </button>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n    else {\r\n      const ForbiddenDesertClient = Client({\r\n        game: ForbiddenDesert,\r\n        numPlayers: this.state.numPlayers,\r\n        board: ForbiddenDesertBoard,\r\n      });\r\n      return (\r\n        <div>\r\n          <ForbiddenDesertClient />\r\n        </div>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}